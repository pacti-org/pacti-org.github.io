
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Compositional system analysis and design using contracts.">
      
      
      
        <link rel="canonical" href="https://www.pacti.org/case_studies/cs-biocircuits/specification_based_synthetic_biology/">
      
      
        <link rel="prev" href="../../cs-multiagent-planning/multiagent/">
      
      
        <link rel="next" href="../../cs-digital-signal-processing/dsp_wl/">
      
      <link rel="icon" href="../../../pacti_small_icon.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.5">
    
    
      
        <title>Synthetic Biology - Pacti</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Libre Baskerville";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/material.css">
    
      <link rel="stylesheet" href="../../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-27G2PM6M65"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-27G2PM6M65",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-27G2PM6M65",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scaling-up-designs-in-synthetic-biology-using-pacti" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine base classes -->


  


<!-- Header -->
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="Header"
  >

    <!-- Link to home -->
    <a
      href="../../.."
      title="Pacti"
      class="md-header__button md-logo"
      aria-label="Pacti"
      data-md-component="logo"
    >
      
  <img src="../../../logos/pacti_colorful.svg" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

    <!-- Navigation tabs (sticky) -->
    
    
        
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

        
      
        
          
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Case Studies
      </a>
    </li>
  

        
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../iocontract/" class="md-tabs__link">
        API
      </a>
    </li>
  

        
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../contributing/" class="md-tabs__link">
        Development
      </a>
    </li>
  

        
      
    </ul>
  </div>
</nav>
    
    

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette -->
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>

      <!-- Search interface -->
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
      <div class="md-header__source">
        <a href="https://github.com/pacti-org/pacti" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    
  </div>
</a>
      </div>
    
  </nav>

</header>

    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Pacti" class="md-nav__button md-logo" aria-label="Pacti" data-md-component="logo">
      
  <img src="../../../logos/pacti_colorful.svg" alt="logo">

    </a>
  </label>
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_1" id="__nav_1_label" tabindex="0">
            Home
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installing/" class="md-nav__link">
        Installing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../docs/getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_2" id="__nav_2_label" tabindex="0">
            Case Studies
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Case Studies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-vehicle-perception/evaluate_perception/" class="md-nav__link">
        Autonomous Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-multiagent-planning/multiagent/" class="md-nav__link">
        Multi-agent Coordination
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Synthetic Biology
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Synthetic Biology
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scaling-up-designs-in-synthetic-biology-using-pacti" class="md-nav__link">
    Scaling up designs in synthetic biology using Pacti
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeling-the-specifications-to-construct-a-library-of-parts" class="md-nav__link">
    Modeling the specifications to construct a library of parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composition-to-find-optimal-sensor-choices" class="md-nav__link">
    Composition to find optimal sensor choices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result" class="md-nav__link">
    Result
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finding-specifications-of-missing-parts" class="md-nav__link">
    Finding specifications of missing parts
  </a>
  
    <nav class="md-nav" aria-label="Finding specifications of missing parts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contract-for-sal-sensor" class="md-nav__link">
    Contract for Sal sensor:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contracts-for-atc-sensor" class="md-nav__link">
    Contracts for aTc sensor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#top-level-system-contract" class="md-nav__link">
    Top-level system contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print-the-contracts" class="md-nav__link">
    Print the contracts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-composition" class="md-nav__link">
    Available composition
  </a>
  
    <nav class="md-nav" aria-label="Available composition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#take-the-quotient-of-the-top-level-contract-in-the-on-condition-from-the-available-composition" class="md-nav__link">
    Take the quotient of the top-level contract in the ON condition from the available composition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result-we-find-the-missing-contract" class="md-nav__link">
    Result: We find the missing contract:
  </a>
  
    <nav class="md-nav" aria-label="Result: We find the missing contract:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find-contract-for-the-missing-subsystem-for-other-conditions-of-the-nand-gate-circuit" class="md-nav__link">
    Find contract for the missing subsystem for other conditions of the NAND gate circuit:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-results-to-a-json-file" class="md-nav__link">
    Write results to a JSON file!
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-digital-signal-processing/dsp_wl/" class="md-nav__link">
        Signal Processing in Digital ICs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-uav-topologies/topologies/" class="md-nav__link">
        UAV Topologies
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
      
      
      
        
          <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            Space Mission Scenario
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          Space Mission Scenario
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/space_mission/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/space_mission_power/" class="md-nav__link">
        Power Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/space_mission_science/" class="md-nav__link">
        Science & Communication Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/space_mission_navigation/" class="md-nav__link">
        Navigation Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/space_mission_thermal/" class="md-nav__link">
        Thermal Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/space_mission_3viewpoints/" class="md-nav__link">
        Schedulability Analysis with 3 Viewpoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_7" >
      
      
      
        
          <label class="md-nav__link " for="__nav_2_7_7" id="__nav_2_7_7_label" tabindex="0">
            Benchmarks for scenario generation
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_7">
          <span class="md-nav__icon md-icon"></span>
          Benchmarks for scenario generation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/scenario_generation_5steps/" class="md-nav__link">
        Short scenario generation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/scenario_generation_20steps/" class="md-nav__link">
        Long scenario generation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_8" >
      
      
      
        
          <label class="md-nav__link " for="__nav_2_7_8" id="__nav_2_7_8_label" tabindex="0">
            Benchmarks for schedulability analysis of generated scenarios
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_8">
          <span class="md-nav__icon md-icon"></span>
          Benchmarks for schedulability analysis of generated scenarios
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/schedulability_analysis_5steps/" class="md-nav__link">
        Short scenario schedulability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/schedulability_analysis_20steps/" class="md-nav__link">
        Long scenario schedulability
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_9" >
      
      
      
        
          <label class="md-nav__link " for="__nav_2_7_9" id="__nav_2_7_9_label" tabindex="0">
            Visualization of schedulable combinations
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_9">
          <span class="md-nav__icon md-icon"></span>
          Visualization of schedulable combinations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/analysis_results1-5steps/" class="md-nav__link">
        Short scenario & requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/space_mission/analysis_results1-20steps/" class="md-nav__link">
        Long scenario & requirements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cs-space-mission/mars_entry_descent_landing/mars_edl_2nd_encoding/" class="md-nav__link">
        Mars 2020 Entry-Descent-Landing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_3" id="__nav_3_label" tabindex="0">
            API
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../iocontract/" class="md-nav__link">
        IoContract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Polyhedral/" class="md-nav__link">
        PolyhedralTerms
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_4" id="__nav_4_label" tabindex="0">
            Development
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scaling-up-designs-in-synthetic-biology-using-pacti" class="md-nav__link">
    Scaling up designs in synthetic biology using Pacti
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeling-the-specifications-to-construct-a-library-of-parts" class="md-nav__link">
    Modeling the specifications to construct a library of parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#composition-to-find-optimal-sensor-choices" class="md-nav__link">
    Composition to find optimal sensor choices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result" class="md-nav__link">
    Result
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finding-specifications-of-missing-parts" class="md-nav__link">
    Finding specifications of missing parts
  </a>
  
    <nav class="md-nav" aria-label="Finding specifications of missing parts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contract-for-sal-sensor" class="md-nav__link">
    Contract for Sal sensor:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contracts-for-atc-sensor" class="md-nav__link">
    Contracts for aTc sensor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#top-level-system-contract" class="md-nav__link">
    Top-level system contract
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print-the-contracts" class="md-nav__link">
    Print the contracts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-composition" class="md-nav__link">
    Available composition
  </a>
  
    <nav class="md-nav" aria-label="Available composition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#take-the-quotient-of-the-top-level-contract-in-the-on-condition-from-the-available-composition" class="md-nav__link">
    Take the quotient of the top-level contract in the ON condition from the available composition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result-we-find-the-missing-contract" class="md-nav__link">
    Result: We find the missing contract:
  </a>
  
    <nav class="md-nav" aria-label="Result: We find the missing contract:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find-contract-for-the-missing-subsystem-for-other-conditions-of-the-nand-gate-circuit" class="md-nav__link">
    Find contract for the missing subsystem for other conditions of the NAND gate circuit:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-results-to-a-json-file" class="md-nav__link">
    Write results to a JSON file!
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Synthetic Biology</h1>

<div><h2 id="scaling-up-designs-in-synthetic-biology-using-pacti">Scaling up designs in synthetic biology using <em>Pacti</em><a class="headerlink" href="#scaling-up-designs-in-synthetic-biology-using-pacti" title="Permanent link">¶</a></h2>
<p>Research in synthetic biology has accelerated in the past decade due to its enormous promise in engineering biological systems for desired behavior (<a href="https://www.cell.com/trends/plant-science/fulltext/S1360-1385(15)00049-7">here's a review article on synthetic biology</a>, and <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/anie.201609229">here's another</a>). Applications range from biomedicine to engineered living materials and environmental remediation. From a design standpoint, mathematical models have been used to study the behavior of biological systems and analyze various properties (see for example <a href="https://pubs.acs.org/doi/10.1021/acssynbio.2c00534">this modeling paper</a>). However, current experimental design approaches in synthetic biology are largely heuristics and trial-and-error based, hence, difficult to scale. To alleviate this, various modeling and analysis and logic gate design tools (like <a href="https://www.nature.com/articles/s41596-021-00675-2">Cello</a>) have been proposed but none have yet been used to successfully design large biological circuits. We believe that the <em>Pacti</em> framework holds the potential to address this issue of scale due to its generality in writing system specifications and in decoupling the modeling details of each component from their specification. </p>
<p><img alt="main_figure" src="https://github.com/pacti-org/media/blob/main/case_studies/biocircuit_specifications/main_figure.png?raw=true.png"></p>
<p>Some notes on the biological jargon in this notebook:
0. Genetic circuit: A biological system (DNA/group of DNA/DNA and other enzymes, or any other engineered biological system)
1. Protein Expression: This simply means the process of production of a protein, often used when talking about the quantitiy of the protein that is produced.
2. Inducer: A chemical that is used as an input to "induce" a system, that is, a chemical that switched something ON.
3. Plasmid: A plasmid is a small DNA molecule within a cell. Often used interchangeably in this notebook with a "gene".
4. Regulator: A system or a molecule that controls (regulates) something else (expression of a protein or a chemical or enzyme).
5. RPU: This stands for relative promoter units, this is a commonly used unit to measure the quantity of a protein output. You can think of RPU as an analogoue of concentration of a protein.
6. Fold-change: The ratio between the ON and the OFF level of something. You can think of fold-change as "SNR" - the ratio between the output of the system when it is ON (there is a signal that we measure, in this case, RFP) and when it is OFF (so there is only some noisy output, which we refer to as the "leak value of RFP").</p>
<p>This case study shows the use of Pacti to aid the design of engineered biological circuits for altering and observing the dynamics of bacterial gene transfer in soil and its effects on protein expression in plants (schematic shown in Figure A above). As the full system design is large, we focus on the design of a biological NAND gate system. This system has three subsystems, as shown in Figure B. We will use contract <em>composition</em> as part of an optimization strategy to maximize the system fold-change, defined as the ratio between the on and off levels of the system's output. The <em>quotient</em> will be used to infer a specification of a missing subsystem that needs to be designed in our system. We say that an input or an output is "ON" when its level is higher than a minimum  threshold, and is "OFF" when its level is lower than a maximum threshold. We formalize these notions with polyhedral constraints in the contract descriptions. </p>
<p>The biological NAND gate consists of the three subsystems:</p>
<p>1) a sensor with tetracycline (aTc) input that outputs a dCas9 protein, </p>
<p>2) another sensor (to be chosen) that outputs the xRFP-gRNA protein, and </p>
<p>3) a dCas9 repressor subsystem, which takes as inputs the xRFP-gRNA and the dCas9 proteins. </p>
<p>When both inputs to this repressor subsystem are ON, it suppresses the output, RFP, a red fluorescent protein. RFP is also the output of the top-level system. RFP is ON only when either of the sensors inputs are OFF. In this way, the system behavior is that of a NAND logic gate. We will denote the contract for the tetracycline sensor as <span class="arithmatex">\(C_{\text{aTc}}\)</span>, and the contract for dCas9 repression mechanism as <span class="arithmatex">\(C_{\text{dCas9}}\)</span>. Our first task will be to find the second sensor (choose spec for subsystem 2) that maximizes the top-level system fold-change. Then we will consider the task of finding a specification for the repression component (subsystem 3) assuming that the contracts for both sensors and the top-level system are available.</p>
<p>Biological motivation: </p>
<p>The input in this system design is a target gene of interest introduced in the soil through bacteria. The goal is to measure the protein expression of the plant in response to the target gene input. The way we detect whether this gene is present is with many different complex biological processes and the output of whether we detect the gene, is "read out" from the plant leaf. So, the input is the gene of interest that we want to detect and the output is the protein production out of the plants (measured as protein fluorescence). Designing such a biological system is difficult due to the lack of information about key biological mechanisms, absence of characterization data for system parts, unknown effects of the soil context, etc. There are many biological processes that would need to be engineered to build a system like this but we focus on a small part of it =&gt; the engineered bacteria (see Figure). We assume that the top-level designer has asked us to design this functionally complete bacteria as a NAND gate to serve the overall purpose. To optimize the design, we would like the bacterial system to maximize its fold-change, that is, maximize the ratio of its output in the on and the off levels (fold-change = output on / output off). </p>
<p>To summarize, we address the following three tasks in this notebook:</p>
<ol>
<li>Characterized library of parts as assume-guarantee contracts: Using existing experimental data from literature, we present a library of sensors as assume-guarantee contracts that can be used to reason about specifications of diverse biological circuits. For the engineered bacteria case study, we use previously published data (for the Marionette cell lines) to construct a library of 14 sensors.</li>
<li>Speeding up the experimental design: Current experimental design approaches in synthetic biology are heavily reliant on screening experiments where all possible choices are explored experimentally to choose the one that works. This is not only time consuming and expensive but also does not scale beyond three or four independent choices. With the use of <em>Pacti</em> , we demonstrate how scientists may describe the desired top-level behavior as contracts and then computationally choose from a library of available parts to ensure that the components meet the top-level system specification. For the engineered bacteria case study, we find the specification of the sensors that meet the top-level criteria on fold-change of the circuit response.</li>
<li>Finding specifications of missing parts: In synthetic biology, it is common to have parts in the system for which no characterization data is available. Using quotient operation on contracts, we can find the constraints that this missing part must satisfy to meet the desired top-level criteria. For the bacterial case study, we find the missing contract of the dCas9-mediated repression mechanism (as shown in the B panel of the Figure above) for which characterization data is not available in the literature.</li>
</ol>
<h2 id="modeling-the-specifications-to-construct-a-library-of-parts">Modeling the specifications to construct a library of parts<a class="headerlink" href="#modeling-the-specifications-to-construct-a-library-of-parts" title="Permanent link">¶</a></h2>
<p>Using the experimental characterization data for the sensors in the <em>Marionette</em> bacterial cell strain [1], we model the sensor behavior as assume-guarantee contracts. We observe that each sensor has three characteristic behaviors: (1) the off state, where the output of the sensor stays close to zero (the non-zero expression in this state is termed as "leaky response"), (2) the linear rate of output , where the sensor output responds linearly to the input (in log scale), (3) the saturation state, where the sensor output saturates to a maximum constant v</p>
<p>[1] Meyer, Adam J., et al. "Escherichia coli “Marionette” strains with 12 highly optimized small-molecule sensors." Nature chemical biology 15.2 (2019): 196-204.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Load the Pandas library to read experimental data from the Marionette paper [1]</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># Import pacti PolyhedralContract class to read contracts</span>
<span class="kn">from</span> <span class="nn">pacti.terms.polyhedra</span> <span class="kn">import</span> <span class="n">PolyhedralContract</span>
<span class="c1"># Import utility functions for this case study</span>
<span class="kn">from</span> <span class="nn">utils.synbio_utils</span> <span class="kn">import</span> <span class="n">display_sensor_contracts</span><span class="p">,</span> <span class="n">remove_quantization_errors</span>
<span class="c1"># Import pacti PolyhedralContract parent for operations on guarantees</span>
<span class="kn">import</span> <span class="nn">pacti.terms.polyhedra</span> <span class="k">as</span> <span class="nn">gtp</span>
<span class="c1"># Import pacti function to write contracts to a file</span>
<span class="kn">from</span> <span class="nn">pacti</span> <span class="kn">import</span> <span class="n">write_contracts_to_file</span>
<span class="c1"># Import matplotlib for plotting</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1"># Import Python symbolic computation library: sympy</span>
<span class="kn">import</span> <span class="nn">sympy</span>
<span class="c1"># Import Python numpy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Read the data from the paper using the CSV file "marionette_data.csv"</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"data/marionette_data.csv"</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">","</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">"python"</span><span class="p">)</span>
</code></pre></div>
<p>The following table corresponds to this data:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="left">Inducer</th>
<th align="left">Plasmid</th>
<th align="left">Regulator</th>
<th align="left">Promoter</th>
<th align="right">ymax (RPU)</th>
<th align="right">ymin (RPUx10-3)</th>
<th align="right">K (µM)</th>
<th align="right">n</th>
<th align="right">Dynamic range</th>
<th align="right">start</th>
<th align="right">ymax Linear</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="left">DAPG</td>
<td align="left">pAJM.847</td>
<td align="left">PhlFAM</td>
<td align="left">PPhlF</td>
<td align="right">2.5</td>
<td align="right">2.5</td>
<td align="right">1.7</td>
<td align="right">2.1</td>
<td align="right">1000</td>
<td align="right">0.03</td>
<td align="right">2</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">Cuma</td>
<td align="left">pAJM.657</td>
<td align="left">CymRAM</td>
<td align="left">PCymRC</td>
<td align="right">3.7</td>
<td align="right">4.3</td>
<td align="right">8.9</td>
<td align="right">2.4</td>
<td align="right">870</td>
<td align="right">0.3</td>
<td align="right">2</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">OC6</td>
<td align="left">pAJM.474</td>
<td align="left">LuxR</td>
<td align="left">PLuxB</td>
<td align="right">1.3</td>
<td align="right">2.4</td>
<td align="right">0.12</td>
<td align="right">1.8</td>
<td align="right">540</td>
<td align="right">0.002</td>
<td align="right">0.5</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">Van</td>
<td align="left">pAJM.773</td>
<td align="left">VanRAM</td>
<td align="left">PVanCC</td>
<td align="right">3</td>
<td align="right">2.4</td>
<td align="right">26</td>
<td align="right">2.3</td>
<td align="right">1200</td>
<td align="right">1</td>
<td align="right">1.8</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">IPTG</td>
<td align="left">pAJM.336</td>
<td align="left">LacIAM</td>
<td align="left">PTac</td>
<td align="right">3.3</td>
<td align="right">4.8</td>
<td align="right">140</td>
<td align="right">1.8</td>
<td align="right">690</td>
<td align="right">2</td>
<td align="right">1.5</td>
</tr>
<tr>
<td align="right">5</td>
<td align="left">aTc</td>
<td align="left">pAJM.011</td>
<td align="left">TetR</td>
<td align="left">PTet*</td>
<td align="right">2.4</td>
<td align="right">4.9</td>
<td align="right">0.013</td>
<td align="right">3.8</td>
<td align="right">500</td>
<td align="right">0.0018</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">6</td>
<td align="left">Ara</td>
<td align="left">pAJM.677</td>
<td align="left">AraCAM</td>
<td align="left">PBAD</td>
<td align="right">1.2</td>
<td align="right">2.4</td>
<td align="right">37</td>
<td align="right">1.5</td>
<td align="right">500</td>
<td align="right">0.2</td>
<td align="right">0.7</td>
</tr>
<tr>
<td align="right">7</td>
<td align="left">Cho</td>
<td align="left">pAJM.683</td>
<td align="left">BetIAM</td>
<td align="left">PBetI</td>
<td align="right">2.6</td>
<td align="right">8.5</td>
<td align="right">4100</td>
<td align="right">2.7</td>
<td align="right">310</td>
<td align="right">300</td>
<td align="right">0.9</td>
</tr>
<tr>
<td align="right">8</td>
<td align="left">Nar</td>
<td align="left">pAJM.661</td>
<td align="left">TtgRAM</td>
<td align="left">PTtg</td>
<td align="right">0.46</td>
<td align="right">3.4</td>
<td align="right">95</td>
<td align="right">1.9</td>
<td align="right">140</td>
<td align="right">2</td>
<td align="right">0.2</td>
</tr>
<tr>
<td align="right">9</td>
<td align="left">DHBA</td>
<td align="left">pAJM.690</td>
<td align="left">PcaUAM</td>
<td align="left">P3B5B</td>
<td align="right">1.6</td>
<td align="right">4.5</td>
<td align="right">370</td>
<td align="right">1.8</td>
<td align="right">360</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">10</td>
<td align="left">Sal</td>
<td align="left">pAJM.771</td>
<td align="left">NahRAM</td>
<td align="left">PSalTTC</td>
<td align="right">2.8</td>
<td align="right">4.7</td>
<td align="right">43</td>
<td align="right">1.8</td>
<td align="right">600</td>
<td align="right">0.9</td>
<td align="right">1.3</td>
</tr>
<tr>
<td align="right">11</td>
<td align="left">OHC14</td>
<td align="left">pAJM.1642</td>
<td align="left">CinRAM</td>
<td align="left">PCin</td>
<td align="right">1.5</td>
<td align="right">3</td>
<td align="right">0.43</td>
<td align="right">2.3</td>
<td align="right">490</td>
<td align="right">0.016</td>
<td align="right">0.7</td>
</tr>
<tr>
<td align="right">12</td>
<td align="left">Acr</td>
<td align="left">pAJM.884</td>
<td align="left">AcuRAM</td>
<td align="left">PAcu</td>
<td align="right">3.1</td>
<td align="right">37</td>
<td align="right">130</td>
<td align="right">2.5</td>
<td align="right">83</td>
<td align="right">10</td>
<td align="right">1.7</td>
</tr>
<tr>
<td align="right">13</td>
<td align="left">Ery</td>
<td align="left">pAJM.969</td>
<td align="left">MphRAM</td>
<td align="left">PMph</td>
<td align="right">0.29</td>
<td align="right">8</td>
<td align="right">65</td>
<td align="right">1.5</td>
<td align="right">36</td>
<td align="right">2</td>
<td align="right">0.18</td>
</tr>
</tbody>
</table>
<p>Create contracts for the sensor using this experimental data:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_sensor_contracts</span><span class="p">(</span><span class="n">sensor_input</span><span class="o">=</span><span class="s2">"AHL"</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">"FP"</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">yleak</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                            <span class="n">start</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ymax_lin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Creates the contracts for a Marionette sensing subsystem</span>
<span class="sd">    params:</span>
<span class="sd">        * input (str): The inducer input to the sensor</span>
<span class="sd">        * output (str): The output of the genetic construct.</span>
<span class="sd">                        Inducer activates the production of this output</span>
<span class="sd">        * K (float): The value of the Hill activation parameter K</span>
<span class="sd">        * yleak (float): The minimum expression of output even</span>
<span class="sd">                         in absence of inducer</span>
<span class="sd">        * start (float): The value of inducer at which the induction starts</span>
<span class="sd">        * ymax_lin (float): The maximum expression of output by the inducer</span>
<span class="sd">                            before saturating (the end of linear regime)</span>
<span class="sd">    """</span>
    <span class="n">slope</span> <span class="o">=</span> <span class="p">(</span><span class="n">ymax_lin</span> <span class="o">-</span> <span class="n">yleak</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">K</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
    <span class="n">intercept</span> <span class="o">=</span> <span class="n">yleak</span> <span class="o">-</span> <span class="n">slope</span> <span class="o">*</span> <span class="n">start</span>
    <span class="n">contract_0</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span><span class="n">sensor_input</span><span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span><span class="n">output</span><span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">sensor_input</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">"</span><span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">yleak</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">contract_lin</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span><span class="n">sensor_input</span><span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span><span class="n">output</span><span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">sensor_input</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">K</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">sensor_input</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">start</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">slope</span><span class="si">}{</span><span class="n">sensor_input</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">intercept</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">slope</span><span class="si">}{</span><span class="n">sensor_input</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">intercept</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">contract_max</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span><span class="n">sensor_input</span><span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span><span class="n">output</span><span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">sensor_input</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">K</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ymax_lin</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">contract_0</span><span class="p">,</span> <span class="n">contract_lin</span><span class="p">,</span> <span class="n">contract_max</span>
</code></pre></div>
<h2 id="composition-to-find-optimal-sensor-choices">Composition to find optimal sensor choices<a class="headerlink" href="#composition-to-find-optimal-sensor-choices" title="Permanent link">¶</a></h2>
<p>To speed up the experimental screening, we use <em>Pacti</em> to choose a sensor from the library that meets the desired top-level behavior. Here, we have a tetracycline (aTc) sensor that expresses a dCas9 protein and the other sensor (the one we want to choose) that expresses the xRFP guide RNA. The xRFP guide RNA binds to dCas9 to repress the expression of red fluorescent protein (RFP), the output of the system. When either of the sensors are OFF, the output (RFP) is constitutively expressed (that is, output is ON). In this way, the system behavior is that of a NAND logic gate. We denote the contract for the tetracycline sensor as <span class="arithmatex">\(C_{\text{atc}}\)</span> and the contract for dCas9 repression mechanism as <span class="arithmatex">\(C_{\text{dCas9}}\)</span>. For the top-level specification, we define the fold-change of the system as
<span class="arithmatex">\(F = \frac{\text{RFP}_{\text{on}}}{\text{RFP}_{\text{off}}}.\)</span></p>
<p>To choose the sensor that achieves the highest fold-change for the system, we compose the contract for each of the available 13 sensors in the library with the tetracycline contract and the dCas9 repression contract to obtain the top-level system contract. The composition operation in <em>Pacti</em> reports a design error for any sensor that is "unsatisfiable in the given context" to reject some of the choices while some other choices are rejected if they do not meet the set top-level system criteria.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create all sensor contracts:</span>
<span class="n">sensor_names</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]]</span>
<span class="n">sensor_library</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">sensor_library_params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">sensor</span> <span class="ow">in</span> <span class="n">sensor_names</span><span class="p">:</span>
    <span class="n">sensor_params</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">yleak_s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"ymin (RPUx10-3)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">yleak_s</span> <span class="o">=</span> <span class="n">yleak_s</span> <span class="o">*</span> <span class="mf">1e-3</span>
    <span class="n">s_start</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"start"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">s_K</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"K (µM)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ymax_s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"ymax Linear"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">sensor_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"leak"</span><span class="p">:</span> <span class="n">yleak_s</span><span class="p">,</span> <span class="s2">"start"</span><span class="p">:</span> <span class="n">s_start</span><span class="p">,</span>
                     <span class="s2">"K"</span><span class="p">:</span> <span class="n">s_K</span><span class="p">,</span> <span class="s2">"ymax"</span><span class="p">:</span> <span class="n">ymax_s</span><span class="p">}</span>
    <span class="n">s_output</span> <span class="o">=</span> <span class="s2">"dCas9"</span>
    <span class="n">contract_s_0</span><span class="p">,</span> <span class="n">contract_s_lin</span><span class="p">,</span> <span class="n">contract_s_max</span> <span class="o">=</span> <span class="n">create_sensor_contracts</span><span class="p">(</span>
        <span class="n">sensor_input</span><span class="o">=</span><span class="n">sensor</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">"xRFP"</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">s_start</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="n">s_K</span><span class="p">,</span>
        <span class="n">ymax_lin</span><span class="o">=</span><span class="n">ymax_s</span><span class="p">,</span> <span class="n">yleak</span><span class="o">=</span><span class="n">yleak_s</span>
    <span class="p">)</span>
    <span class="n">sensor_library</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">contract_s_0</span><span class="p">,</span> <span class="n">contract_s_lin</span><span class="p">,</span> <span class="n">contract_s_max</span><span class="p">]</span>
    <span class="n">sensor_library_params</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="n">sensor_params</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">all_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">sensor</span> <span class="ow">in</span> <span class="n">sensor_names</span><span class="p">:</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">all_ax</span><span class="p">[</span><span class="n">index</span> <span class="o">//</span> <span class="mi">5</span><span class="p">][</span><span class="n">index</span> <span class="o">%</span> <span class="mi">5</span><span class="p">]</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">yleak_s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"ymin (RPUx10-3)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">yleak_s</span> <span class="o">=</span> <span class="n">yleak_s</span> <span class="o">*</span> <span class="mf">1e-3</span>
    <span class="n">s_start</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"start"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">s_K</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"K (µM)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ymax_s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="n">sensor</span><span class="p">][</span><span class="s2">"ymax Linear"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">display_sensor_contracts</span><span class="p">(</span>
        <span class="n">sensor_input</span><span class="o">=</span><span class="n">sensor</span><span class="p">,</span>
        <span class="n">output</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
        <span class="n">leak</span><span class="o">=</span><span class="n">yleak_s</span><span class="p">,</span>
        <span class="n">start</span><span class="o">=</span><span class="n">s_start</span><span class="p">,</span>
        <span class="n">K</span><span class="o">=</span><span class="n">s_K</span><span class="p">,</span>
        <span class="n">ymax_lin</span><span class="o">=</span><span class="n">ymax_s</span><span class="p">,</span>
        <span class="n">xlim_min</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">xlim_max</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">ylim_min</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">ylim_max</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">sensor</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">"both"</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">"major"</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Output"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">all_ax</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="c1"># plt.savefig('all_sensors.svg')</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../specification_based_synthetic_biology_files/specification_based_synthetic_biology_13_0.png"></p>
<p>Write the contract for the dCas9 repression mechanism</p>
<div class="highlight"><pre><span></span><code><span class="n">dCas9_contract_off</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
    <span class="c1"># "xRFP:OFF, dCas9:OFF, RFP:ON",</span>
    <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"xRFP"</span><span class="p">,</span> <span class="s2">"dCas9"</span><span class="p">],</span>
    <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"RFP"</span><span class="p">],</span>
    <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"xRFP &lt;= 0.2"</span><span class="p">,</span>
        <span class="s2">"dCas9 &lt;= 0.1"</span>
    <span class="p">],</span>
    <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"-RFP &lt;= -10"</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">dCas9_contract_on</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
    <span class="c1"># "The dCas9 repression: xRFP:ON, dCas9:ON, RFP:OFF",</span>
    <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"xRFP"</span><span class="p">,</span> <span class="s2">"dCas9"</span><span class="p">],</span>
    <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"RFP"</span><span class="p">],</span>
    <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"-xRFP &lt;= -0.3"</span><span class="p">,</span>
        <span class="s2">"xRFP &lt;= 1"</span><span class="p">,</span>
        <span class="s2">"-dCas9 &lt;= -0.1"</span><span class="p">,</span>
        <span class="s2">"dCas9 &lt;= 0.8"</span>
    <span class="p">],</span>
    <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"RFP + 2xRFP + 0.1dCas9 &lt;= 5"</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Our 2nd input is aTc that outputs "dCas9"</span>
<span class="c1"># Create the contracts for this sensor</span>
<span class="c1"># using our `create_sensor_contracts` function</span>
<span class="n">input2</span> <span class="o">=</span> <span class="s2">"aTc"</span>
<span class="n">in2_params</span> <span class="o">=</span> <span class="n">sensor_library_params</span><span class="p">[</span><span class="n">input2</span><span class="p">]</span>
<span class="n">c_atc_off</span><span class="p">,</span> <span class="n">c_atc_on</span><span class="p">,</span> <span class="n">c_atc_sat</span> <span class="o">=</span> <span class="n">create_sensor_contracts</span><span class="p">(</span><span class="n">sensor_input</span><span class="o">=</span><span class="s2">"aTc"</span><span class="p">,</span>
                                                         <span class="n">output</span><span class="o">=</span><span class="s2">"dCas9"</span><span class="p">,</span>
                                                         <span class="n">start</span><span class="o">=</span><span class="n">in2_params</span>
                                                         <span class="p">[</span><span class="s2">"start"</span><span class="p">],</span>
                                                         <span class="n">K</span><span class="o">=</span><span class="n">in2_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">],</span>
                                                         <span class="n">ymax_lin</span><span class="o">=</span><span class="n">in2_params</span>
                                                         <span class="p">[</span><span class="s2">"ymax"</span><span class="p">],</span>
                                                         <span class="n">yleak</span><span class="o">=</span><span class="n">in2_params</span>
                                                         <span class="p">[</span><span class="s2">"leak"</span><span class="p">])</span>
<span class="c1"># Now we will go through all other sensors and</span>
<span class="c1"># find out which are OK to use given the context</span>
<span class="n">sensor_ok</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># We will store all sensor names that are not compatible in a dictionary:</span>
<span class="n">design_error</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># We will store the fold-change for all the</span>
<span class="c1"># sensors that are OK in this dictionary:</span>
<span class="n">fold_change</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1"># Desired fold change: RFP_on/RFP_off</span>
<span class="n">desired_fold_change</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1"># Go through all sensors in the library except aTc,</span>
<span class="c1"># since that has been chosen for the 2nd subsystem</span>
<span class="k">for</span> <span class="n">sensor</span> <span class="ow">in</span> <span class="n">sensor_library</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">sensor</span> <span class="o">==</span> <span class="s2">"aTc"</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="n">in1_params</span> <span class="o">=</span> <span class="n">sensor_library_params</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span>
    <span class="c1"># OFF condition</span>
    <span class="c1"># (note that RFP will be ON for this, so we will calculate "rfp_vals_on")</span>
    <span class="n">c_sensor1</span> <span class="o">=</span> <span class="n">sensor_library</span><span class="p">[</span><span class="n">sensor</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">c_sensor2</span> <span class="o">=</span> <span class="n">c_atc_off</span>
    <span class="c1"># Compose the sensors together</span>
    <span class="c1"># (if allowed! =&gt; Handle exceptions of the Pacti</span>
    <span class="c1"># design error if composition is not allowed)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sensor_comp</span> <span class="o">=</span> <span class="n">c_sensor2</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">c_sensor1</span><span class="p">)</span>
        <span class="n">top_level_off</span> <span class="o">=</span> <span class="n">sensor_comp</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">dCas9_contract_off</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># If Pacti raises a ValueError saying that the composition was</span>
        <span class="c1"># "unsatisfiable in context", then that</span>
        <span class="c1"># means that this sensor will not work!</span>
        <span class="k">if</span> <span class="s2">"unsatisfiable in context"</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
            <span class="n">sensor_ok</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sensor_ok</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># If the try block succeeds, this block runs</span>
        <span class="c1"># Remove quantization errors that are introduced in solving equations</span>
        <span class="n">top_level_off</span> <span class="o">=</span> <span class="n">remove_quantization_errors</span><span class="p">(</span><span class="n">top_level_off</span><span class="p">)</span>
        <span class="c1"># Get the guarantee term and evaluate it</span>
        <span class="n">sym_expr</span> <span class="o">=</span> <span class="n">gtp</span><span class="o">.</span><span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">to_symbolic</span><span class="p">(</span><span class="n">top_level_off</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rfp_vals_on</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">updated_sym</span> <span class="o">=</span> <span class="n">sym_expr</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sensor</span><span class="p">,</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">in1_params</span><span class="p">[</span><span class="s2">"start"</span><span class="p">])</span>
        <span class="n">updated_sym</span> <span class="o">=</span> <span class="n">updated_sym</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">input2</span><span class="p">,</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">in2_params</span><span class="p">[</span><span class="s2">"start"</span><span class="p">])</span>
        <span class="n">subs_val</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">updated_sym</span><span class="p">,</span> <span class="s2">"RFP"</span><span class="p">)</span>
        <span class="n">rfp_vals_on</span><span class="p">[</span><span class="n">in1_params</span><span class="p">[</span><span class="s2">"start"</span><span class="p">],</span> <span class="n">in2_params</span><span class="p">[</span><span class="s2">"start"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">subs_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># ON condition</span>
    <span class="c1"># (note that RFP will be OFF for this, so we will calculate "rfp_vals_off")</span>
    <span class="n">c_sensor1</span> <span class="o">=</span> <span class="n">sensor_library</span><span class="p">[</span><span class="n">sensor</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">c_sensor2</span> <span class="o">=</span> <span class="n">c_atc_on</span>
    <span class="c1"># Compose the sensors together</span>
    <span class="c1"># (if allowed! =&gt; Handle exceptions of the Pacti</span>
    <span class="c1"># design error if composition is not allowed)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sensor_comp</span> <span class="o">=</span> <span class="n">c_sensor2</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">c_sensor1</span><span class="p">)</span>
        <span class="n">top_level_on</span> <span class="o">=</span> <span class="n">sensor_comp</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">dCas9_contract_on</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># If Pacti raises a ValueError saying that the composition was</span>
        <span class="c1"># "unsatisfiable in context", then that means</span>
        <span class="c1"># that this sensor will not work!</span>
        <span class="k">if</span> <span class="s2">"unsatisfiable in context"</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
            <span class="n">design_error</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">design_error</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># If the try block succeeds, this block runs</span>
        <span class="c1"># Remove quantization errors that are introduced in solving equations</span>
        <span class="n">top_level_on</span> <span class="o">=</span> <span class="n">remove_quantization_errors</span><span class="p">(</span><span class="n">top_level_on</span><span class="p">)</span>
        <span class="c1"># Get the guarantee term and evaluate it</span>
        <span class="n">sym_expr</span> <span class="o">=</span> <span class="n">gtp</span><span class="o">.</span><span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">to_symbolic</span><span class="p">(</span><span class="n">top_level_on</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rfp_vals_off</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">updated_sym</span> <span class="o">=</span> <span class="n">sym_expr</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sensor</span><span class="p">,</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">in1_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">])</span>
        <span class="n">updated_sym</span> <span class="o">=</span> <span class="n">updated_sym</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">input2</span><span class="p">,</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">in2_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">])</span>
        <span class="n">subs_val</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">updated_sym</span><span class="p">,</span> <span class="s2">"RFP"</span><span class="p">)</span>
        <span class="n">rfp_vals_off</span><span class="p">[</span><span class="n">in1_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">],</span> <span class="n">in2_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">subs_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># Now that we have rfp_vals_on and rfp_vals_off,</span>
    <span class="c1"># we can compute the fold change:</span>
    <span class="k">if</span> <span class="n">design_error</span><span class="p">[</span><span class="n">sensor</span><span class="p">]:</span>
        <span class="n">RFP_on</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rfp_vals_on</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">RFP_off</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rfp_vals_off</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">fold_change</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="n">RFP_on</span> <span class="o">/</span> <span class="n">RFP_off</span>
        <span class="k">if</span> <span class="n">fold_change</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">desired_fold_change</span><span class="p">:</span>
            <span class="n">sensor_ok</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sensor_ok</span><span class="p">[</span><span class="n">sensor</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">fold_change</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">fold_change</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">"C1"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"Sensor"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"Top-level fold-change"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
<p><img alt="png" src="../specification_based_synthetic_biology_files/specification_based_synthetic_biology_17_0.png"></p>
<h2 id="result">Result<a class="headerlink" href="#result" title="Permanent link">¶</a></h2>
<p>Choose subsystem 1 using the above exploration chart as the sensor that gives the highest-fold change:</p>
<p>We choose "Cuma" with the contract:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">contract</span> <span class="ow">in</span> <span class="n">sensor_library</span><span class="p">[</span><span class="s2">"Cuma"</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">contract</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [Cuma]
OutVars:[xRFP]
A: [
  Cuma &lt;= 0.3
]
G: [
  xRFP &lt;= 0.0043
]
InVars: [Cuma]
OutVars:[xRFP]
A: [
  Cuma &lt;= 8.9
  -Cuma &lt;= -0.3
]
G: [
  0.2321 Cuma - xRFP = -0.06532
]
InVars: [Cuma]
OutVars:[xRFP]
A: [
  -Cuma &lt;= -8.9
]
G: [
  -xRFP &lt;= -2
]
</code></pre>
<p>Note that not all sensors were compatible. Some of the sensor choices led to errors in design automatically caught by <em>Pacti</em> :</p>
<div class="highlight"><pre><span></span><code><span class="n">fold_change</span>
</code></pre></div>
<pre><code>{'DAPG': 8.66785005774809,
 'Cuma': 9.68674395539190,
 'OC6': 2.52677363203287,
 'Van': 7.26517302130202,
 'IPTG': 4.72491416737617,
 'Ara': 2.76605435260938,
 'Cho': 3.30535361336978,
 'DHBA': 3.32963257502971,
 'Sal': 4.07634004092162,
 'OHC14': 2.83319542816097,
 'Acr': 6.97093280769728}
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">sensor_ok</span>
</code></pre></div>
<pre><code>{'DAPG': True,
 'Cuma': True,
 'OC6': False,
 'Van': True,
 'IPTG': True,
 'Ara': False,
 'Cho': False,
 'Nar': True,
 'DHBA': False,
 'Sal': True,
 'OHC14': False,
 'Acr': True,
 'Ery': True}
</code></pre>
<h2 id="finding-specifications-of-missing-parts">Finding specifications of missing parts<a class="headerlink" href="#finding-specifications-of-missing-parts" title="Permanent link">¶</a></h2>
<p>For the NAND gate described above, if we write a desired top-level contract <span class="arithmatex">\(C_{\text{sys}}\)</span> and assume that both sensors have been chosen (here we choose Sal and aTc) so that we have the contracts for both sensors. Then, we may use quotient operation in <em>Pacti</em> to find the ideal specifications of the dCas9 mechanism. This can guide the design of the repression mechanism.</p>
<h3 id="contract-for-sal-sensor">Contract for Sal sensor:<a class="headerlink" href="#contract-for-sal-sensor" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">yleak_sal</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Sal"</span><span class="p">][</span><span class="s2">"ymin (RPUx10-3)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mf">1e-3</span>
<span class="n">sal_start</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Sal"</span><span class="p">][</span><span class="s2">"start"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sal_K</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Sal"</span><span class="p">][</span><span class="s2">"K (µM)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ymax_sal</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"Sal"</span><span class="p">][</span><span class="s2">"ymax Linear"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">sal_output</span> <span class="o">=</span> <span class="s2">"xRFP"</span>
<span class="n">contract_sal_min</span><span class="p">,</span> <span class="n">contract_sal_lin</span><span class="p">,</span> <span class="n">contract_sal_max</span> <span class="o">=</span> <span class="n">create_sensor_contracts</span><span class="p">(</span>
    <span class="n">sensor_input</span><span class="o">=</span><span class="s2">"Sal"</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">sal_output</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">sal_start</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="n">sal_K</span><span class="p">,</span>
    <span class="n">ymax_lin</span><span class="o">=</span><span class="n">ymax_sal</span><span class="p">,</span> <span class="n">yleak</span><span class="o">=</span><span class="n">yleak_sal</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">display_sensor_contracts</span><span class="p">(</span><span class="n">sensor_input</span><span class="o">=</span><span class="s2">"Input 1"</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">"xRFP"</span><span class="p">,</span> <span class="n">leak</span><span class="o">=</span><span class="n">yleak_sal</span><span class="p">,</span>
                         <span class="n">start</span><span class="o">=</span><span class="n">sal_start</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="n">sal_K</span><span class="p">,</span> <span class="n">ymax_lin</span><span class="o">=</span><span class="n">ymax_sal</span><span class="p">,</span> <span class="n">xlim_min</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">,</span>
                         <span class="n">xlim_max</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="n">ylim_min</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">,</span> <span class="n">ylim_max</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../specification_based_synthetic_biology_files/specification_based_synthetic_biology_26_0.png"></p>
<pre><code>&lt;Axes: xlabel='Input 1', ylabel='xRFP'&gt;
</code></pre>
<h3 id="contracts-for-atc-sensor">Contracts for aTc sensor<a class="headerlink" href="#contracts-for-atc-sensor" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">yleak_atc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"aTc"</span><span class="p">][</span><span class="s2">"ymin (RPUx10-3)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mf">1e-3</span>
<span class="n">atc_start</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"aTc"</span><span class="p">][</span><span class="s2">"start"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">atc_K</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"aTc"</span><span class="p">][</span><span class="s2">"K (µM)"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ymax_atc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"Inducer"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"aTc"</span><span class="p">][</span><span class="s2">"ymax Linear"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">atc_output</span> <span class="o">=</span> <span class="s2">"dCas9"</span>
<span class="n">contract_atc_min</span><span class="p">,</span> <span class="n">contract_atc_lin</span><span class="p">,</span> <span class="n">contract_atc_max</span> <span class="o">=</span> <span class="n">create_sensor_contracts</span><span class="p">(</span>
    <span class="n">sensor_input</span><span class="o">=</span><span class="s2">"aTc"</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">atc_output</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">atc_start</span><span class="p">,</span> <span class="n">K</span><span class="o">=</span><span class="n">atc_K</span><span class="p">,</span>
    <span class="n">ymax_lin</span><span class="o">=</span><span class="n">ymax_atc</span><span class="p">,</span> <span class="n">yleak</span><span class="o">=</span><span class="n">yleak_atc</span>
<span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">display_sensor_contracts</span><span class="p">(</span>
    <span class="n">sensor_input</span><span class="o">=</span><span class="s2">"aTc"</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">"dCas9"</span><span class="p">,</span>
    <span class="n">leak</span><span class="o">=</span><span class="n">yleak_atc</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="n">atc_start</span><span class="p">,</span>
    <span class="n">K</span><span class="o">=</span><span class="n">atc_K</span><span class="p">,</span>
    <span class="n">ymax_lin</span><span class="o">=</span><span class="n">ymax_atc</span><span class="p">,</span>
    <span class="n">xlim_min</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">xlim_max</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">ylim_min</span><span class="o">=</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">ylim_max</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">1</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>
<p><img alt="png" src="../specification_based_synthetic_biology_files/specification_based_synthetic_biology_29_0.png"></p>
<h3 id="top-level-system-contract">Top-level system contract<a class="headerlink" href="#top-level-system-contract" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">leak_RFP</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">([</span><span class="n">yleak_atc</span><span class="p">,</span> <span class="n">yleak_sal</span><span class="p">])</span>
<span class="n">max_RFP</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">([</span><span class="n">ymax_atc</span><span class="p">,</span> <span class="n">ymax_sal</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">create_top_level_contracts</span><span class="p">(</span><span class="n">input1</span><span class="o">=</span><span class="s2">"u1"</span><span class="p">,</span> <span class="n">input2</span><span class="o">=</span><span class="s2">"u2"</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">"y"</span><span class="p">,</span>
                               <span class="n">input1_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">input2_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">output_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Creates the top level system contracts</span>
<span class="sd">    """</span>
    <span class="n">u1_start</span> <span class="o">=</span> <span class="n">input1_params</span><span class="p">[</span><span class="s2">"start"</span><span class="p">]</span>
    <span class="n">u1_K</span> <span class="o">=</span> <span class="n">input1_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">]</span>

    <span class="n">u2_start</span> <span class="o">=</span> <span class="n">input2_params</span><span class="p">[</span><span class="s2">"start"</span><span class="p">]</span>
    <span class="n">u2_K</span> <span class="o">=</span> <span class="n">input2_params</span><span class="p">[</span><span class="s2">"K"</span><span class="p">]</span>

    <span class="n">y_max</span> <span class="o">=</span> <span class="n">output_params</span><span class="p">[</span><span class="s2">"max"</span><span class="p">]</span>
    <span class="n">y_leak</span> <span class="o">=</span> <span class="n">output_params</span><span class="p">[</span><span class="s2">"leak"</span><span class="p">]</span>
    <span class="n">all_contracts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">contract_top_level_on1</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="c1"># "u1:OFF, u2:OFF, y:ON",</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">input1</span><span class="p">,</span> <span class="n">input2</span>
        <span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">output</span>
        <span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u1_start</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u1_start</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u2_start</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u2_start</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2">&lt;=</span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">y_max</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">all_contracts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contract_top_level_on1</span><span class="p">)</span>
    <span class="n">contract_top_level_on2</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="c1"># "u1:ON, u2:OFF, y:ON",</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">input1</span><span class="p">,</span> <span class="n">input2</span>
        <span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">output</span>
        <span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">u1_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u2_start</span><span class="o">*</span><span class="mf">0.01</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u1_K</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u1_K</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input2</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u2_start</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u2_start</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">y_max</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">all_contracts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contract_top_level_on2</span><span class="p">)</span>
    <span class="n">contract_top_level_on3</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="c1"># "u1:OFF, u2:ON, y:ON",</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">input1</span><span class="p">,</span> <span class="n">input2</span>
        <span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">output</span>
        <span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u1_start</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u1_start</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">input2</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">u2_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u2_start</span><span class="o">*</span><span class="mf">0.01</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input2</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u2_K</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u2_K</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2">&lt;=</span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">y_max</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">all_contracts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contract_top_level_on3</span><span class="p">)</span>
    <span class="n">contract_top_level_off</span> <span class="o">=</span> <span class="n">PolyhedralContract</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span>
        <span class="c1"># "u1:ON, u2:ON, y:OFF",</span>
        <span class="n">input_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">input1</span><span class="p">,</span> <span class="n">input2</span>
        <span class="p">],</span>
        <span class="n">output_vars</span><span class="o">=</span><span class="p">[</span>
            <span class="n">output</span>
        <span class="p">],</span>
        <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">u1_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u1_start</span><span class="o">*</span><span class="mf">0.01</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input1</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u1_K</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u1_K</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"-</span><span class="si">{</span><span class="n">input2</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">u2_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u2_start</span><span class="o">*</span><span class="mf">0.01</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">input2</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">u2_K</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">u2_K</span><span class="o">*</span><span class="mf">0.01</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">guarantees</span><span class="o">=</span><span class="p">[</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="n">y_leak</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">all_contracts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">contract_top_level_off</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">all_contracts</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">sal_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"start"</span><span class="p">:</span> <span class="n">sal_start</span><span class="p">,</span> <span class="s2">"K"</span><span class="p">:</span> <span class="n">sal_K</span><span class="p">}</span>
<span class="n">atc_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"start"</span><span class="p">:</span> <span class="n">atc_start</span><span class="p">,</span> <span class="s2">"K"</span><span class="p">:</span> <span class="n">atc_K</span><span class="p">}</span>
<span class="n">RFP_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"max"</span><span class="p">:</span> <span class="n">max_RFP</span><span class="p">,</span> <span class="s2">"leak"</span><span class="p">:</span> <span class="n">leak_RFP</span><span class="p">}</span>
<span class="n">ctop_off_off</span><span class="p">,</span> <span class="n">ctop_on_off</span><span class="p">,</span> <span class="n">ctop_off_on</span><span class="p">,</span> <span class="n">ctop_on_on</span> <span class="o">=</span> <span class="n">create_top_level_contracts</span><span class="p">(</span>
    <span class="n">input1</span><span class="o">=</span><span class="s2">"Sal"</span><span class="p">,</span> <span class="n">input2</span><span class="o">=</span><span class="s2">"aTc"</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">"RFP"</span><span class="p">,</span>
    <span class="n">input1_params</span><span class="o">=</span><span class="n">sal_params</span><span class="p">,</span> <span class="n">input2_params</span><span class="o">=</span><span class="n">atc_params</span><span class="p">,</span> <span class="n">output_params</span><span class="o">=</span><span class="n">RFP_params</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="print-the-contracts">Print the contracts<a class="headerlink" href="#print-the-contracts" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">contract_atc_lin</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [aTc]
OutVars:[dCas9]
A: [
  aTc &lt;= 0.013
  -aTc &lt;= -0.0018
]
G: [
  88.85 aTc - dCas9 = -0.155
]
</code></pre>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">contract_sal_lin</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [Sal]
OutVars:[xRFP]
A: [
  Sal &lt;= 43
  -Sal &lt;= -0.9
]
G: [
  0.03077 Sal - xRFP = -0.02299
]
</code></pre>
<h3 id="available-composition">Available composition<a class="headerlink" href="#available-composition" title="Permanent link">¶</a></h3>
<p>(in the NAND gate ON condition =&gt; output is OFF)</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">contract_sal_lin</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">contract_atc_lin</span><span class="p">))</span>
</code></pre></div>
<pre><code>InVars: [Sal, aTc]
OutVars:[xRFP, dCas9]
A: [
  Sal &lt;= 43
  -Sal &lt;= -0.9
  aTc &lt;= 0.013
  -aTc &lt;= -0.0018
]
G: [
  0.03077 Sal - xRFP = -0.02299
  88.85 aTc - dCas9 = -0.155
]
</code></pre>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">ctop_on_on</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [Sal, aTc]
OutVars:[RFP]
A: [
  -Sal &lt;= -0.909
  Sal &lt;= 42.57
  -aTc &lt;= -0.001818
  aTc &lt;= 0.01287
]
G: [
  RFP &lt;= 0.0049
]
</code></pre>
<h4 id="take-the-quotient-of-the-top-level-contract-in-the-on-condition-from-the-available-composition">Take the quotient of the top-level contract in the ON condition from the available composition<a class="headerlink" href="#take-the-quotient-of-the-top-level-contract-in-the-on-condition-from-the-available-composition" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">csal_atc</span> <span class="o">=</span> <span class="n">contract_sal_lin</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">contract_atc_lin</span><span class="p">)</span>
<span class="n">dCas_repression_lin</span> <span class="o">=</span> <span class="n">ctop_on_on</span><span class="o">.</span><span class="n">quotient</span><span class="p">(</span><span class="n">csal_atc</span><span class="p">)</span>
</code></pre></div>
<h2 id="result-we-find-the-missing-contract">Result: We find the missing contract:<a class="headerlink" href="#result-we-find-the-missing-contract" title="Permanent link">¶</a></h2>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">dCas_repression_lin</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [xRFP, dCas9]
OutVars:[RFP]
A: [
  -xRFP &lt;= -0.05096
  xRFP &lt;= 1.333
  -dCas9 &lt;= -0.3166
  dCas9 &lt;= 1.299
]
G: [
  RFP &lt;= 0.0049
]
</code></pre>
<h4 id="find-contract-for-the-missing-subsystem-for-other-conditions-of-the-nand-gate-circuit">Find contract for the missing subsystem for other conditions of the NAND gate circuit:<a class="headerlink" href="#find-contract-for-the-missing-subsystem-for-other-conditions-of-the-nand-gate-circuit" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">contract_sal_min</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [Sal]
OutVars:[xRFP]
A: [
  Sal &lt;= 0.9
]
G: [
  xRFP &lt;= 0.0047
]
</code></pre>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">contract_atc_lin</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [aTc]
OutVars:[dCas9]
A: [
  aTc &lt;= 0.013
  -aTc &lt;= -0.0018
]
G: [
  88.85 aTc - dCas9 = -0.155
]
</code></pre>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">contract_sal_min</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">contract_atc_lin</span><span class="p">))</span>
</code></pre></div>
<pre><code>InVars: [Sal, aTc]
OutVars:[xRFP, dCas9]
A: [
  Sal &lt;= 0.9
  aTc &lt;= 0.013
  -aTc &lt;= -0.0018
]
G: [
  xRFP &lt;= 0.0047
  88.85 aTc - dCas9 = -0.155
]
</code></pre>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">ctop_off_on</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [Sal, aTc]
OutVars:[RFP]
A: [
  Sal &lt;= 0.891
  -aTc &lt;= -0.001818
  aTc &lt;= 0.01287
]
G: [
  -RFP &lt;= -1.3
]
</code></pre>
<div class="highlight"><pre><span></span><code><span class="n">csal_atc</span> <span class="o">=</span> <span class="n">contract_sal_min</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">contract_atc_lin</span><span class="p">)</span>
<span class="n">dCas_repression_off_on</span> <span class="o">=</span> <span class="n">ctop_off_on</span><span class="o">.</span><span class="n">quotient</span><span class="p">(</span><span class="n">csal_atc</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">dCas_repression_off_on</span><span class="p">)</span>
</code></pre></div>
<pre><code>InVars: [xRFP, dCas9]
OutVars:[RFP]
A: [
  xRFP &lt;= 0.0047
  -dCas9 &lt;= -0.3166
  dCas9 &lt;= 1.299
]
G: [
  -RFP &lt;= -1.3
]
</code></pre>
<h2 id="write-results-to-a-json-file">Write results to a JSON file!<a class="headerlink" href="#write-results-to-a-json-file" title="Permanent link">¶</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">system_json_contracts</span> <span class="o">=</span> <span class="n">write_contracts_to_file</span><span class="p">([</span><span class="n">dCas_repression_lin</span><span class="p">,</span> <span class="n">dCas_repression_off_on</span><span class="p">],</span>
                                                <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"dCas_Linear"</span><span class="p">,</span> <span class="s2">"dCas_off_on"</span><span class="p">],</span>
                                                <span class="n">file_name</span><span class="o">=</span><span class="s2">"data/dCas9_repression.json"</span><span class="p">)</span>
</code></pre></div></div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - <script>document.write(new Date().getFullYear())</script> Caltech &amp UC Berkeley - <a href="#__consent">Change cookie settings</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.407015b8.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://kit.fontawesome.com/4f533dc5a0.js"></script>
      
    
  </body>
</html>