
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Compositional system analysis and design using contracts.">
      
      
      
        <link rel="canonical" href="https://www.pacti.org/reference/pacti/terms/polyhedra/polyhedra/">
      
      
      
      <link rel="icon" href="../../../../../pacti_small_icon.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.5">
    
    
      
        <title>Polyhedra - Pacti</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.7a7fce14.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Libre Baskerville";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../../css/material.css">
    
      <link rel="stylesheet" href="../../../../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-27G2PM6M65"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-27G2PM6M65",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-27G2PM6M65",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="purple">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pacti.terms.polyhedra.polyhedra" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine base classes -->


  


<!-- Header -->
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="Header"
  >

    <!-- Link to home -->
    <a
      href="../../../../.."
      title="Pacti"
      class="md-header__button md-logo"
      aria-label="Pacti"
      data-md-component="logo"
    >
      
  <img src="../../../../../logos/pacti_colorful.svg" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

    <!-- Navigation tabs (sticky) -->
    
    
        
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

        
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../case_studies/" class="md-tabs__link">
        Case Studies
      </a>
    </li>
  

        
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../iocontract/" class="md-tabs__link">
        API
      </a>
    </li>
  

        
      
        
          
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../contributing/" class="md-tabs__link">
        Development
      </a>
    </li>
  

        
      
    </ul>
  </div>
</nav>
    
    

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette -->
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>

      <!-- Search interface -->
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
      <div class="md-header__source">
        <a href="https://github.com/pacti-org/pacti" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    
  </div>
</a>
      </div>
    
  </nav>

</header>

    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Pacti" class="md-nav__button md-logo" aria-label="Pacti" data-md-component="logo">
      
  <img src="../../../../../logos/pacti_colorful.svg" alt="logo">

    </a>
  </label>
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_1" id="__nav_1_label" tabindex="0">
            Home
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../installing/" class="md-nav__link">
        Installing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../docs/getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_2" id="__nav_2_label" tabindex="0">
            Case Studies
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Case Studies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-vehicle-perception/evaluate_perception/" class="md-nav__link">
        Evaluating Perception with respect to System-level Specifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-multiagent-planning/multiagent/" class="md-nav__link">
        Trajectory planning for multi-agent systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-biocircuits/specification_based_synthetic_biology/" class="md-nav__link">
        Synthetic Biology
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-digital-signal-processing/dsp_wl/" class="md-nav__link">
        Signal Processing in Digital ICs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-uav-topologies/topologies/" class="md-nav__link">
        Topology generation for UAV designs using Pacti
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
      
      
      
        
          <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            Space Mission Scenario
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          Space Mission Scenario
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/space_mission/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/space_mission_power/" class="md-nav__link">
        Power Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/space_mission_science/" class="md-nav__link">
        Science & Communication Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/space_mission_navigation/" class="md-nav__link">
        Navigation Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/space_mission_thermal/" class="md-nav__link">
        Thermal Viewpoint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/space_mission_3viewpoints/" class="md-nav__link">
        Schedulability Analysis with 3 Viewpoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_7" >
      
      
      
        
          <label class="md-nav__link " for="__nav_2_7_7" id="__nav_2_7_7_label" tabindex="0">
            Benchmarks for scenario generation
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7_7">
          <span class="md-nav__icon md-icon"></span>
          Benchmarks for scenario generation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/scenario_generation_5steps/" class="md-nav__link">
        Short scenario generation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/space_mission/scenario_generation_20steps/" class="md-nav__link">
        Long scenario generation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../case_studies/cs-space-mission/mars_entry_descent_landing/mars_edl_2nd_encoding/" class="md-nav__link">
        Mars 2020 Entry-Descent-Landing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_3" id="__nav_3_label" tabindex="0">
            API
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../iocontract/" class="md-nav__link">
        IoContract
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../Polyhedral/" class="md-nav__link">
        PolyhedralTerms
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        
          <label class="md-nav__link nav_heading " for="__nav_4" id="__nav_4_label" tabindex="0">
            Development
            <span class="md-nav__icon md-icon"></span>
          </label>
        
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra" class="md-nav__link">
    pacti.terms.polyhedra.polyhedra
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm" class="md-nav__link">
    PolyhedralTerm
  </a>
  
    <nav class="md-nav" aria-label="PolyhedralTerm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.vars" class="md-nav__link">
    vars
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.contains_var" class="md-nav__link">
    contains_var()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.copy" class="md-nav__link">
    copy()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_coefficient" class="md-nav__link">
    get_coefficient()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_matching_vars" class="md-nav__link">
    get_matching_vars()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_polarity" class="md-nav__link">
    get_polarity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_sign" class="md-nav__link">
    get_sign()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.isolate_variable" class="md-nav__link">
    isolate_variable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.multiply" class="md-nav__link">
    multiply()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.polytope_to_term" class="md-nav__link">
    polytope_to_term()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.remove_variable" class="md-nav__link">
    remove_variable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.rename_variable" class="md-nav__link">
    rename_variable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.solve_for_variables" class="md-nav__link">
    solve_for_variables()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.substitute_variable" class="md-nav__link">
    substitute_variable()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.term_to_polytope" class="md-nav__link">
    term_to_polytope()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.to_symbolic" class="md-nav__link">
    to_symbolic()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.to_term" class="md-nav__link">
    to_term()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList" class="md-nav__link">
    PolyhedralTermList
  </a>
  
    <nav class="md-nav" aria-label="PolyhedralTermList">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.contains_behavior" class="md-nav__link">
    contains_behavior()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.elim_vars_by_refining" class="md-nav__link">
    elim_vars_by_refining()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.elim_vars_by_relaxing" class="md-nav__link">
    elim_vars_by_relaxing()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.evaluate" class="md-nav__link">
    evaluate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.is_empty" class="md-nav__link">
    is_empty()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.is_polytope_empty" class="md-nav__link">
    is_polytope_empty()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.lacks_constraints" class="md-nav__link">
    lacks_constraints()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.optimize" class="md-nav__link">
    optimize()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.polytope_to_termlist" class="md-nav__link">
    polytope_to_termlist()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.reduce_polytope" class="md-nav__link">
    reduce_polytope()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.refines" class="md-nav__link">
    refines()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.simplify" class="md-nav__link">
    simplify()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.termlist_to_polytope" class="md-nav__link">
    termlist_to_polytope()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.to_str_list" class="md-nav__link">
    to_str_list()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.verify_polytope_containment" class="md-nav__link">
    verify_polytope_containment()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Polyhedra</h1>

<div class="doc doc-object doc-module">


<a id="pacti.terms.polyhedra.polyhedra"></a>
  <div class="doc doc-contents first">
  
      <p>Support for linear inequality constraints, i.e., polyhedra.</p>
<p>Module provides support for linear inequalities as constraints, i.e.,
the constraints are of the form <span class="arithmatex">\(\sum_{i} a_i x_i \le c\)</span>, where the
<span class="arithmatex">\(x_i\)</span> are variables and the <span class="arithmatex">\(a_i\)</span> and <span class="arithmatex">\(c\)</span> are constants.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" class="doc doc-heading">
        <code>PolyhedralTerm</code>


<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm" class="headerlink" title="Permanent link">Â¶</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Term" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Term">Term</a></code></p>

  
      <p>Polyhedral terms are linear inequalities over a list of variables.</p>


        <details class="quote">
          <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PolyhedralTerm</span><span class="p">(</span><span class="n">Term</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Polyhedral terms are linear inequalities over a list of variables."""</span>

    <span class="c1"># Constructor: get (i) a dictionary whose keys are variables and whose</span>
    <span class="c1"># values are the coefficients of those variables in the term, and (b) a</span>
    <span class="c1"># constant. The term is assumed to be in the form \Sigma_i a_i v_i +</span>
    <span class="c1"># constant &lt;= 0</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">],</span> <span class="n">constant</span><span class="p">:</span> <span class="n">numeric</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Constructor for PolyhedralTerm.</span>

<span class="sd">        Usage:</span>
<span class="sd">            Polyhedral terms are initialized as follows:</span>

<span class="sd">            ```</span>
<span class="sd">                variables = {Var('x'):2, Var('y'):3}</span>
<span class="sd">                constant = 3</span>
<span class="sd">                term = PolyhedralTerm(variables, constant)</span>
<span class="sd">            ```</span>

<span class="sd">            `variables` is a dictionary whose keys are `Var` instances,</span>
<span class="sd">            and `constant` is a number. Thus, our example represents the</span>
<span class="sd">            expression $2x + 3y \\le 3$.</span>

<span class="sd">        Args:</span>
<span class="sd">            variables: A dictionary mapping Var keys to numeric values.</span>
<span class="sd">            constant: A numeric value on the right of the inequality.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Unsupported argument type.</span>
<span class="sd">        """</span>
        <span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Unsupported argument type"</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">variable_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="n">variable_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constant</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">constant</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">match</span> <span class="o">=</span> <span class="n">match</span> <span class="ow">and</span> <span class="p">(</span><span class="n">v</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">match</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">constant</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">varlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">varlist</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">res</span> <span class="o">=</span> <span class="s2">" + "</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"*"</span> <span class="o">+</span> <span class="n">var</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">varlist</span><span class="p">])</span>
        <span class="n">res</span> <span class="o">+=</span> <span class="s2">" &lt;= "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"&lt;Term </span><span class="si">{0}</span><span class="s2">&gt;"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>
        <span class="n">varlist</span> <span class="o">=</span> <span class="n">list_union</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">varlist</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Generates copy of polyhedral term.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Copy of term.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rename_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_var</span><span class="p">:</span> <span class="n">Var</span><span class="p">,</span> <span class="n">target_var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Rename a variable in a term.</span>

<span class="sd">        Args:</span>
<span class="sd">            source_var: The variable to be replaced.</span>
<span class="sd">            target_var: The new variable.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A term with `source_var` replaced by `target_var`.</span>
<span class="sd">        """</span>
        <span class="n">new_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">source_var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">target_var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
                <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">target_var</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">target_var</span><span class="p">]</span> <span class="o">+=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">source_var</span><span class="p">]</span>
            <span class="n">new_term</span> <span class="o">=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">remove_variable</span><span class="p">(</span><span class="n">source_var</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_term</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">]:</span>  <span class="c1"># noqa: A003</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Variables appearing in term with a nonzero coefficient.</span>

<span class="sd">        Example:</span>
<span class="sd">            For the term $ax + by \\le c$ with variables $x$ and</span>
<span class="sd">            $y$, this function returns the list $\\{x, y\\}$ if</span>
<span class="sd">            $a$ and $b$ are nonzero.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of variables referenced in term.</span>
<span class="sd">        """</span>
        <span class="n">varlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">varlist</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contains_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_to_seek</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Tell whether term contains a given variable.</span>

<span class="sd">        Args:</span>
<span class="sd">            var_to_seek: The variable that we are seeking in the current term.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if the syntax of the term refers to the given variable;</span>
<span class="sd">            `False` otherwise.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="n">var_to_seek</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span>

    <span class="k">def</span> <span class="nf">get_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numeric</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Output the coefficient multiplying the given variable in the term.</span>

<span class="sd">        Args:</span>
<span class="sd">            var: The variable whose coefficient we are seeking.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The coefficient corresponding to variable in the term.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">get_polarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">,</span> <span class="n">polarity</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Check if variable matches given polarity</span>

<span class="sd">        The polarity of a variable in a term is defined as the polarity of the</span>
<span class="sd">        coefficient that multiplies it in a term, e.g., the variables $x$</span>
<span class="sd">        and $y$ in the term $-2x + y \\le 3$ have negative and</span>
<span class="sd">        positive polarities respectively.</span>

<span class="sd">        Args:</span>
<span class="sd">            var: The variable whose polarity in the term we are seeking.</span>
<span class="sd">            polarity: The polarity that we are comparing against the variable's polarity.</span>

<span class="sd">        Returns:</span>
<span class="sd">            `True` if the variable's polarity matches `polarity` and</span>
<span class="sd">            `False` otherwise. If the variable's coefficient in the term</span>
<span class="sd">            is zero, return `True`.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">polarity</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">get_sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Get the sign of the variable in term.</span>

<span class="sd">        The sign of a variable in a term is defined as the sign of the</span>
<span class="sd">        coefficient that multiplies it in a term, e.g., the variables $x$</span>
<span class="sd">        and $y$ in the term $-2x + y \\le 3$ have $-1$ and</span>
<span class="sd">        $+1$ polarities respectively. $0$ has $+1$ sign.</span>

<span class="sd">        Args:</span>
<span class="sd">            var: The variable whose polarity in the term we are seeking.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The sign of the variable in the term.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_polarity</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">polarity</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">get_matching_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_polarity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Get list of variables whose polarities match the polarities requested.</span>

<span class="sd">        Example:</span>

<span class="sd">        ```</span>
<span class="sd">            x = Var('x')</span>
<span class="sd">            y = Var('y')</span>
<span class="sd">            z = Var('z')</span>
<span class="sd">            variables = {x:-2, y:3}</span>
<span class="sd">            constant  = 4</span>
<span class="sd">            term = PolyhedralTerm(variables, constant)</span>
<span class="sd">            polarities = {y:True}</span>
<span class="sd">            term.get_matching_vars(polarities)</span>
<span class="sd">        ```</span>

<span class="sd">        The last call returns `{y, z}` because the variable y matches the</span>
<span class="sd">        requested polarity in the term, and the variable z has a zero</span>
<span class="sd">        coefficient.</span>

<span class="sd">        Args:</span>
<span class="sd">            variable_polarity: A dictionary mapping Var instances to Boolean</span>
<span class="sd">                values indicating the polarity of the given variable.</span>

<span class="sd">        Returns:</span>
<span class="sd">            If all variables in the term match the polarities specified in the</span>
<span class="sd">            argument, the routine returns the matching variables.  Otherwise,</span>
<span class="sd">            it returns an empty list.</span>
<span class="sd">        """</span>
        <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variable_polarity</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>  <span class="c1"># noqa: VNE002</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_polarity</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">polarity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">variable_polarity</span><span class="p">[</span><span class="n">var</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span>  <span class="c1"># noqa: WPS337</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="p">):</span>
                    <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">variable_list</span>

    <span class="k">def</span> <span class="nf">remove_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Eliminates a variable from a term.</span>

<span class="sd">        Args:</span>
<span class="sd">            var: variable to be eliminated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new term with the variable eliminated.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
            <span class="n">that</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">that</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">that</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">:</span> <span class="n">numeric</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Multiplies a term by a constant factor.</span>

<span class="sd">        For example, multiplying the term $2x + 3y \\le 4$ by the factor 2</span>
<span class="sd">        yields $4x + 6y \\le 8$.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: element by which the term is multiplied.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new term which is the result of the given term multiplied by</span>
<span class="sd">            `factor`.</span>
<span class="sd">        """</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">factor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">substitute_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">,</span> <span class="n">subst_with_term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Substitutes a specified variable in a term with a given term.</span>

<span class="sd">        Example:</span>
<span class="sd">            In the term $2x - y \\le 6$, substituting y by the term</span>
<span class="sd">            $x + z \\le 5$ yields $x - z \\le 1$. Observe that the</span>
<span class="sd">            substituting term is understood as an equality.</span>

<span class="sd">        Args:</span>
<span class="sd">            var: The term variable to be substituted.</span>
<span class="sd">            subst_with_term: The term used to replace var.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new term in which the variable is substituted with the given term</span>
<span class="sd">            understood as an equality.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
            <span class="n">term</span> <span class="o">=</span> <span class="n">subst_with_term</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Term is </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">term</span><span class="p">)</span>
            <span class="n">that</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_variable</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">that</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">that</span> <span class="o">+</span> <span class="n">term</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">isolate_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_to_isolate</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Isolate a variable in a term.</span>

<span class="sd">        Example:</span>
<span class="sd">            In the term $-2x + y \\le 6$ understood as equality, isolating the</span>
<span class="sd">            variable $x$ yields $x = 0.5 y - 3$, which in PolyhedralTerm</span>
<span class="sd">            notation we express as $0.5 y &lt;= -3$.</span>

<span class="sd">        Args:</span>
<span class="sd">            var_to_isolate: The variable to be isolated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new term which corresponds to the isolation of the indicated</span>
<span class="sd">            variable.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: the indicated variable is not contained in the term.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">var_to_isolate</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Variable </span><span class="si">%s</span><span class="s2"> is not a term variable"</span> <span class="o">%</span> <span class="p">(</span><span class="n">var_to_isolate</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span>
            <span class="n">variables</span><span class="o">=</span><span class="p">{</span>
                <span class="n">k</span><span class="p">:</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var_to_isolate</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">var_to_isolate</span>
            <span class="p">},</span>
            <span class="n">constant</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">constant</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var_to_isolate</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">to_symbolic</span><span class="p">(</span><span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Translates the variable terms of a PolyhedralTerm into a sympy expression.</span>

<span class="sd">        Example:</span>
<span class="sd">            The code</span>

<span class="sd">            ```</span>
<span class="sd">                x = Var('x') y = Var('y') variables = {x:-2, y:3} constant  = 4</span>
<span class="sd">                term = PolyhedralTerm(variables, constant) expression =</span>
<span class="sd">                PolyhedralTerm.to_symbolic(term)</span>
<span class="sd">            ```</span>

<span class="sd">            yields the expression $-2x + 3y$.</span>

<span class="sd">        Args:</span>
<span class="sd">            term:</span>
<span class="sd">                The term whose coefficients and variables are to be translated</span>
<span class="sd">                to sympy's data structure.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Sympy expression corresponding to PolyhedralTerm.</span>
<span class="sd">        """</span>
        <span class="n">ex</span> <span class="o">=</span> <span class="o">-</span><span class="n">term</span><span class="o">.</span><span class="n">constant</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">sv</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">ex</span> <span class="o">+=</span> <span class="n">sv</span> <span class="o">*</span> <span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ex</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">to_term</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="n">sympy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">Expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Translates a sympy expression into a PolyhedralTerm.</span>

<span class="sd">        Example:</span>
<span class="sd">            The expression $2x + 3y - 1$ is translated into</span>
<span class="sd">            `PolyhedralTerm(variables={x:2, y:3}, constant=1)`.</span>

<span class="sd">        Args:</span>
<span class="sd">            expression: The symbolic expression to be translated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            PolyhedralTerm corresponding to sympy expression.</span>
<span class="sd">        """</span>
        <span class="n">expression_coefficients</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">as_coefficients_dict</span><span class="p">()</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">expression_coefficients</span><span class="p">)</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">expression_coefficients</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">sympy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="p">)):</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>  <span class="c1"># noqa: VNE002</span>
                <span class="n">variable_dict</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">expression_coefficients</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">constant</span> <span class="o">=</span> <span class="n">constant</span> <span class="o">-</span> <span class="n">expression_coefficients</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">*</span> <span class="n">key</span>
        <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variable_dict</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">variable_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">numeric</span><span class="p">],</span> <span class="n">numeric</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Transform a term into a vector according to the given order.</span>

<span class="sd">        Example:</span>
<span class="sd">            The term $3x + 5y -2z \\le 7$ with `variable_list = [y,</span>
<span class="sd">            x, w, z]` yields the tuple `[5, 3, 0, -2], 7`.</span>

<span class="sd">        Args:</span>
<span class="sd">            term: The term to be transformed.</span>
<span class="sd">            variable_list:</span>
<span class="sd">                A list of variables indicating the order of appearance of</span>
<span class="sd">                variable coefficients.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple consisting of (i) the ordered list of coefficients and (ii)</span>
<span class="sd">            the term's constant.</span>
<span class="sd">        """</span>
        <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variable_list</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">constant</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">polytope_to_term</span><span class="p">(</span><span class="n">poly</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">numeric</span><span class="p">],</span> <span class="n">const</span><span class="p">:</span> <span class="n">numeric</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Transform a list of coefficients and variables into a PolyhedralTerm.</span>

<span class="sd">        Args:</span>
<span class="sd">            poly: An ordered list of coefficients.</span>
<span class="sd">            const: The term's coefficient.</span>
<span class="sd">            variables: The variables corresponding to the list of coefficients.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A PolyhedralTerm corresponding to the provided data.</span>
<span class="sd">        """</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables</span><span class="p">):</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">variable_dict</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variable_dict</span><span class="p">,</span> <span class="n">const</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">solve_for_variables</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Interpret termlist as equality and solve system of equations.</span>

<span class="sd">        Args:</span>
<span class="sd">            context:</span>
<span class="sd">                The list of terms to be solved. Each term will be interpreted as</span>
<span class="sd">                an equality.</span>
<span class="sd">            vars_to_elim:</span>
<span class="sd">                The list of variables whose solutions will be sought.</span>

<span class="sd">        Assumptions: the number of equations matches the number of vars_to_elim</span>
<span class="sd">        contained in the terms.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary mapping variables to their solutions. The solutions are</span>
<span class="sd">            expressed as PolyhedralTerm instances.</span>
<span class="sd">        """</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"GetVals: </span><span class="si">%s</span><span class="s2"> Vars: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
        <span class="n">vars_to_solve</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">vars_to_solve</span><span class="p">)</span>
        <span class="n">exprs</span> <span class="o">=</span> <span class="p">[</span><span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">to_symbolic</span><span class="p">(</span><span class="n">term</span><span class="p">)</span> <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">]</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Solving </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>
        <span class="n">vars_to_solve_symb</span> <span class="o">=</span> <span class="p">[</span><span class="n">sympy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">vars_to_solve</span><span class="p">]</span>
        <span class="n">sols</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="o">*</span><span class="n">vars_to_solve_symb</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">sols</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sols</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">Var</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)):</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">to_term</span><span class="p">(</span><span class="n">sols</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sols</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
        <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.vars" class="doc doc-heading">
<code class="highlight language-python"><span class="nb">vars</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.vars" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Variables appearing in term with a nonzero coefficient.</p>

<details class="example">
  <summary>Example</summary>
  <p>For the term <span class="arithmatex">\(ax + by \le c\)</span> with variables <span class="arithmatex">\(x\)</span> and
<span class="arithmatex">\(y\)</span>, this function returns the list <span class="arithmatex">\(\{x, y\}\)</span> if
<span class="arithmatex">\(a\)</span> and <span class="arithmatex">\(b\)</span> are nonzero.</p>
</details>
  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>List of variables referenced in term.</p></td>
        </tr>
    </tbody>
  </table>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.__init__" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Constructor for PolyhedralTerm.</p>

<details class="usage">
  <summary>Usage</summary>
  <p>Polyhedral terms are initialized as follows:</p>
<div class="highlight"><pre><span></span><code>    variables = {Var('x'):2, Var('y'):3}
    constant = 3
    term = PolyhedralTerm(variables, constant)
</code></pre></div>
<p><code>variables</code> is a dictionary whose keys are <code>Var</code> instances,
and <code>constant</code> is a number. Thus, our example represents the
expression <span class="arithmatex">\(2x + 3y \le 3\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>variables</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>, <span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>A dictionary mapping Var keys to numeric values.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>constant</code></td>
          <td>
                <code><span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span></code>
          </td>
          <td><p>A numeric value on the right of the inequality.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>Unsupported argument type.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">],</span> <span class="n">constant</span><span class="p">:</span> <span class="n">numeric</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Constructor for PolyhedralTerm.</span>

<span class="sd">    Usage:</span>
<span class="sd">        Polyhedral terms are initialized as follows:</span>

<span class="sd">        ```</span>
<span class="sd">            variables = {Var('x'):2, Var('y'):3}</span>
<span class="sd">            constant = 3</span>
<span class="sd">            term = PolyhedralTerm(variables, constant)</span>
<span class="sd">        ```</span>

<span class="sd">        `variables` is a dictionary whose keys are `Var` instances,</span>
<span class="sd">        and `constant` is a number. Thus, our example represents the</span>
<span class="sd">        expression $2x + 3y \\le 3$.</span>

<span class="sd">    Args:</span>
<span class="sd">        variables: A dictionary mapping Var keys to numeric values.</span>
<span class="sd">        constant: A numeric value on the right of the inequality.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Unsupported argument type.</span>
<span class="sd">    """</span>
    <span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Unsupported argument type"</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">variable_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="n">variable_dict</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constant</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">constant</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.contains_var" class="doc doc-heading">
<code class="highlight language-python"><span class="n">contains_var</span><span class="p">(</span><span class="n">var_to_seek</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.contains_var" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Tell whether term contains a given variable.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var_to_seek</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The variable that we are seeking in the current term.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p><code>True</code> if the syntax of the term refers to the given variable;</p></td>
        </tr>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p><code>False</code> otherwise.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">contains_var</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_to_seek</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Tell whether term contains a given variable.</span>

<span class="sd">    Args:</span>
<span class="sd">        var_to_seek: The variable that we are seeking in the current term.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the syntax of the term refers to the given variable;</span>
<span class="sd">        `False` otherwise.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">var_to_seek</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.copy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">copy</span><span class="p">()</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.copy" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Generates copy of polyhedral term.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>Copy of term.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Generates copy of polyhedral term.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Copy of term.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_coefficient" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_coefficient" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Output the coefficient multiplying the given variable in the term.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The variable whose coefficient we are seeking.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span></code>
          </td>
          <td><p>The coefficient corresponding to variable in the term.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numeric</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Output the coefficient multiplying the given variable in the term.</span>

<span class="sd">    Args:</span>
<span class="sd">        var: The variable whose coefficient we are seeking.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The coefficient corresponding to variable in the term.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
    <span class="k">return</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_matching_vars" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_matching_vars</span><span class="p">(</span><span class="n">variable_polarity</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_matching_vars" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get list of variables whose polarities match the polarities requested.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>    x = Var('x')
    y = Var('y')
    z = Var('z')
    variables = {x:-2, y:3}
    constant  = 4
    term = PolyhedralTerm(variables, constant)
    polarities = {y:True}
    term.get_matching_vars(polarities)
</code></pre></div>
<p>The last call returns <code>{y, z}</code> because the variable y matches the
requested polarity in the term, and the variable z has a zero
coefficient.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>variable_polarity</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>, bool]</code>
          </td>
          <td><p>A dictionary mapping Var instances to Boolean
values indicating the polarity of the given variable.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>If all variables in the term match the polarities specified in the</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>argument, the routine returns the matching variables.  Otherwise,</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>it returns an empty list.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_matching_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_polarity</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Get list of variables whose polarities match the polarities requested.</span>

<span class="sd">    Example:</span>

<span class="sd">    ```</span>
<span class="sd">        x = Var('x')</span>
<span class="sd">        y = Var('y')</span>
<span class="sd">        z = Var('z')</span>
<span class="sd">        variables = {x:-2, y:3}</span>
<span class="sd">        constant  = 4</span>
<span class="sd">        term = PolyhedralTerm(variables, constant)</span>
<span class="sd">        polarities = {y:True}</span>
<span class="sd">        term.get_matching_vars(polarities)</span>
<span class="sd">    ```</span>

<span class="sd">    The last call returns `{y, z}` because the variable y matches the</span>
<span class="sd">    requested polarity in the term, and the variable z has a zero</span>
<span class="sd">    coefficient.</span>

<span class="sd">    Args:</span>
<span class="sd">        variable_polarity: A dictionary mapping Var instances to Boolean</span>
<span class="sd">            values indicating the polarity of the given variable.</span>

<span class="sd">    Returns:</span>
<span class="sd">        If all variables in the term match the polarities specified in the</span>
<span class="sd">        argument, the routine returns the matching variables.  Otherwise,</span>
<span class="sd">        it returns an empty list.</span>
<span class="sd">    """</span>
    <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variable_polarity</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>  <span class="c1"># noqa: VNE002</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_polarity</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">polarity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">variable_polarity</span><span class="p">[</span><span class="n">var</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span>  <span class="c1"># noqa: WPS337</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="p">):</span>
                <span class="n">variable_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">variable_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">variable_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_polarity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_polarity</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">polarity</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_polarity" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check if variable matches given polarity</p>
<p>The polarity of a variable in a term is defined as the polarity of the
coefficient that multiplies it in a term, e.g., the variables <span class="arithmatex">\(x\)</span>
and <span class="arithmatex">\(y\)</span> in the term <span class="arithmatex">\(-2x + y \le 3\)</span> have negative and
positive polarities respectively.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The variable whose polarity in the term we are seeking.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>polarity</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>The polarity that we are comparing against the variable's polarity.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p><code>True</code> if the variable's polarity matches <code>polarity</code> and</p></td>
        </tr>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p><code>False</code> otherwise. If the variable's coefficient in the term</p></td>
        </tr>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>is zero, return <code>True</code>.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_polarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">,</span> <span class="n">polarity</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Check if variable matches given polarity</span>

<span class="sd">    The polarity of a variable in a term is defined as the polarity of the</span>
<span class="sd">    coefficient that multiplies it in a term, e.g., the variables $x$</span>
<span class="sd">    and $y$ in the term $-2x + y \\le 3$ have negative and</span>
<span class="sd">    positive polarities respectively.</span>

<span class="sd">    Args:</span>
<span class="sd">        var: The variable whose polarity in the term we are seeking.</span>
<span class="sd">        polarity: The polarity that we are comparing against the variable's polarity.</span>

<span class="sd">    Returns:</span>
<span class="sd">        `True` if the variable's polarity matches `polarity` and</span>
<span class="sd">        `False` otherwise. If the variable's coefficient in the term</span>
<span class="sd">        is zero, return `True`.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">polarity</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_sign" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_sign</span><span class="p">(</span><span class="n">var</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.get_sign" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the sign of the variable in term.</p>
<p>The sign of a variable in a term is defined as the sign of the
coefficient that multiplies it in a term, e.g., the variables <span class="arithmatex">\(x\)</span>
and <span class="arithmatex">\(y\)</span> in the term <span class="arithmatex">\(-2x + y \le 3\)</span> have <span class="arithmatex">\(-1\)</span> and
<span class="arithmatex">\(+1\)</span> polarities respectively. <span class="arithmatex">\(0\)</span> has <span class="arithmatex">\(+1\)</span> sign.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The variable whose polarity in the term we are seeking.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td><p>The sign of the variable in the term.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Get the sign of the variable in term.</span>

<span class="sd">    The sign of a variable in a term is defined as the sign of the</span>
<span class="sd">    coefficient that multiplies it in a term, e.g., the variables $x$</span>
<span class="sd">    and $y$ in the term $-2x + y \\le 3$ have $-1$ and</span>
<span class="sd">    $+1$ polarities respectively. $0$ has $+1$ sign.</span>

<span class="sd">    Args:</span>
<span class="sd">        var: The variable whose polarity in the term we are seeking.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The sign of the variable in the term.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_polarity</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">polarity</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.isolate_variable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">isolate_variable</span><span class="p">(</span><span class="n">var_to_isolate</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.isolate_variable" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Isolate a variable in a term.</p>

<details class="example">
  <summary>Example</summary>
  <p>In the term <span class="arithmatex">\(-2x + y \le 6\)</span> understood as equality, isolating the
variable <span class="arithmatex">\(x\)</span> yields <span class="arithmatex">\(x = 0.5 y - 3\)</span>, which in PolyhedralTerm
notation we express as <span class="arithmatex">\(0.5 y &lt;= -3\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var_to_isolate</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The variable to be isolated.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>A new term which corresponds to the isolation of the indicated</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>variable.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>the indicated variable is not contained in the term.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">isolate_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_to_isolate</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Isolate a variable in a term.</span>

<span class="sd">    Example:</span>
<span class="sd">        In the term $-2x + y \\le 6$ understood as equality, isolating the</span>
<span class="sd">        variable $x$ yields $x = 0.5 y - 3$, which in PolyhedralTerm</span>
<span class="sd">        notation we express as $0.5 y &lt;= -3$.</span>

<span class="sd">    Args:</span>
<span class="sd">        var_to_isolate: The variable to be isolated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new term which corresponds to the isolation of the indicated</span>
<span class="sd">        variable.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: the indicated variable is not contained in the term.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">var_to_isolate</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Variable </span><span class="si">%s</span><span class="s2"> is not a term variable"</span> <span class="o">%</span> <span class="p">(</span><span class="n">var_to_isolate</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span>
        <span class="n">variables</span><span class="o">=</span><span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var_to_isolate</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">var_to_isolate</span>
        <span class="p">},</span>
        <span class="n">constant</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">constant</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var_to_isolate</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.multiply" class="doc doc-heading">
<code class="highlight language-python"><span class="n">multiply</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.multiply" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Multiplies a term by a constant factor.</p>
<p>For example, multiplying the term <span class="arithmatex">\(2x + 3y \le 4\)</span> by the factor 2
yields <span class="arithmatex">\(4x + 6y \le 8\)</span>.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>factor</code></td>
          <td>
                <code><span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span></code>
          </td>
          <td><p>element by which the term is multiplied.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>A new term which is the result of the given term multiplied by</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p><code>factor</code>.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">multiply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">:</span> <span class="n">numeric</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Multiplies a term by a constant factor.</span>

<span class="sd">    For example, multiplying the term $2x + 3y \\le 4$ by the factor 2</span>
<span class="sd">    yields $4x + 6y \\le 8$.</span>

<span class="sd">    Args:</span>
<span class="sd">        factor: element by which the term is multiplied.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new term which is the result of the given term multiplied by</span>
<span class="sd">        `factor`.</span>
<span class="sd">    """</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">factor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.polytope_to_term" class="doc doc-heading">
<code class="highlight language-python"><span class="n">polytope_to_term</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">const</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.polytope_to_term" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Transform a list of coefficients and variables into a PolyhedralTerm.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>poly</code></td>
          <td>
                <code><span title="typing.List">List</span>[<span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>An ordered list of coefficients.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>const</code></td>
          <td>
                <code><span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span></code>
          </td>
          <td><p>The term's coefficient.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variables</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>The variables corresponding to the list of coefficients.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>A PolyhedralTerm corresponding to the provided data.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">polytope_to_term</span><span class="p">(</span><span class="n">poly</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">numeric</span><span class="p">],</span> <span class="n">const</span><span class="p">:</span> <span class="n">numeric</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Transform a list of coefficients and variables into a PolyhedralTerm.</span>

<span class="sd">    Args:</span>
<span class="sd">        poly: An ordered list of coefficients.</span>
<span class="sd">        const: The term's coefficient.</span>
<span class="sd">        variables: The variables corresponding to the list of coefficients.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A PolyhedralTerm corresponding to the provided data.</span>
<span class="sd">    """</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">variables</span><span class="p">):</span>  <span class="c1"># noqa: VNE002</span>
        <span class="n">variable_dict</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variable_dict</span><span class="p">,</span> <span class="n">const</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.remove_variable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_variable</span><span class="p">(</span><span class="n">var</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.remove_variable" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Eliminates a variable from a term.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>variable to be eliminated.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>A new term with the variable eliminated.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Eliminates a variable from a term.</span>

<span class="sd">    Args:</span>
<span class="sd">        var: variable to be eliminated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new term with the variable eliminated.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
        <span class="n">that</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">that</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">that</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.rename_variable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rename_variable</span><span class="p">(</span><span class="n">source_var</span><span class="p">,</span> <span class="n">target_var</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.rename_variable" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Rename a variable in a term.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>source_var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The variable to be replaced.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>target_var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The new variable.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>A term with <code>source_var</code> replaced by <code>target_var</code>.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rename_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_var</span><span class="p">:</span> <span class="n">Var</span><span class="p">,</span> <span class="n">target_var</span><span class="p">:</span> <span class="n">Var</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Rename a variable in a term.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_var: The variable to be replaced.</span>
<span class="sd">        target_var: The new variable.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A term with `source_var` replaced by `target_var`.</span>
<span class="sd">    """</span>
    <span class="n">new_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">source_var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">target_var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">target_var</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">target_var</span><span class="p">]</span> <span class="o">+=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">source_var</span><span class="p">]</span>
        <span class="n">new_term</span> <span class="o">=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">remove_variable</span><span class="p">(</span><span class="n">source_var</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">new_term</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.solve_for_variables" class="doc doc-heading">
<code class="highlight language-python"><span class="n">solve_for_variables</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.solve_for_variables" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Interpret termlist as equality and solve system of equations.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>The list of terms to be solved. Each term will be interpreted as
an equality.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>vars_to_elim</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>The list of variables whose solutions will be sought.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Assumptions: the number of equations matches the number of vars_to_elim
contained in the terms.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td><p>A dictionary mapping variables to their solutions. The solutions are</p></td>
        </tr>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td><p>expressed as PolyhedralTerm instances.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">solve_for_variables</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Interpret termlist as equality and solve system of equations.</span>

<span class="sd">    Args:</span>
<span class="sd">        context:</span>
<span class="sd">            The list of terms to be solved. Each term will be interpreted as</span>
<span class="sd">            an equality.</span>
<span class="sd">        vars_to_elim:</span>
<span class="sd">            The list of variables whose solutions will be sought.</span>

<span class="sd">    Assumptions: the number of equations matches the number of vars_to_elim</span>
<span class="sd">    contained in the terms.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary mapping variables to their solutions. The solutions are</span>
<span class="sd">        expressed as PolyhedralTerm instances.</span>
<span class="sd">    """</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"GetVals: </span><span class="si">%s</span><span class="s2"> Vars: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
    <span class="n">vars_to_solve</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">vars_to_solve</span><span class="p">)</span>
    <span class="n">exprs</span> <span class="o">=</span> <span class="p">[</span><span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">to_symbolic</span><span class="p">(</span><span class="n">term</span><span class="p">)</span> <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">]</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Solving </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">exprs</span><span class="p">)</span>
    <span class="n">vars_to_solve_symb</span> <span class="o">=</span> <span class="p">[</span><span class="n">sympy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">vars_to_solve</span><span class="p">]</span>
    <span class="n">sols</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">exprs</span><span class="p">,</span> <span class="o">*</span><span class="n">vars_to_solve_symb</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">sols</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sols</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">Var</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)):</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">to_term</span><span class="p">(</span><span class="n">sols</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sols</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.substitute_variable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">substitute_variable</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">subst_with_term</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.substitute_variable" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Substitutes a specified variable in a term with a given term.</p>

<details class="example">
  <summary>Example</summary>
  <p>In the term <span class="arithmatex">\(2x - y \le 6\)</span>, substituting y by the term
<span class="arithmatex">\(x + z \le 5\)</span> yields <span class="arithmatex">\(x - z \le 1\)</span>. Observe that the
substituting term is understood as an equality.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a></code>
          </td>
          <td><p>The term variable to be substituted.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>subst_with_term</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>The term used to replace var.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>A new term in which the variable is substituted with the given term</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>understood as an equality.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">substitute_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">:</span> <span class="n">Var</span><span class="p">,</span> <span class="n">subst_with_term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Substitutes a specified variable in a term with a given term.</span>

<span class="sd">    Example:</span>
<span class="sd">        In the term $2x - y \\le 6$, substituting y by the term</span>
<span class="sd">        $x + z \\le 5$ yields $x - z \\le 1$. Observe that the</span>
<span class="sd">        substituting term is understood as an equality.</span>

<span class="sd">    Args:</span>
<span class="sd">        var: The term variable to be substituted.</span>
<span class="sd">        subst_with_term: The term used to replace var.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new term in which the variable is substituted with the given term</span>
<span class="sd">        understood as an equality.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_var</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
        <span class="n">term</span> <span class="o">=</span> <span class="n">subst_with_term</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Term is </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">term</span><span class="p">)</span>
        <span class="n">that</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_variable</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">that</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">that</span> <span class="o">+</span> <span class="n">term</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.term_to_polytope" class="doc doc-heading">
<code class="highlight language-python"><span class="n">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">variable_list</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.term_to_polytope" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Transform a term into a vector according to the given order.</p>

<details class="example">
  <summary>Example</summary>
  <p>The term <span class="arithmatex">\(3x + 5y -2z \le 7\)</span> with <code>variable_list = [y,
x, w, z]</code> yields the tuple <code>[5, 3, 0, -2], 7</code>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>term</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>The term to be transformed.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variable_list</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>A list of variables indicating the order of appearance of
variable coefficients.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>A tuple consisting of (i) the ordered list of coefficients and (ii)</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span></code>
          </td>
          <td><p>the term's constant.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">variable_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">numeric</span><span class="p">],</span> <span class="n">numeric</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Transform a term into a vector according to the given order.</span>

<span class="sd">    Example:</span>
<span class="sd">        The term $3x + 5y -2z \\le 7$ with `variable_list = [y,</span>
<span class="sd">        x, w, z]` yields the tuple `[5, 3, 0, -2], 7`.</span>

<span class="sd">    Args:</span>
<span class="sd">        term: The term to be transformed.</span>
<span class="sd">        variable_list:</span>
<span class="sd">            A list of variables indicating the order of appearance of</span>
<span class="sd">            variable coefficients.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple consisting of (i) the ordered list of coefficients and (ii)</span>
<span class="sd">        the term's constant.</span>
<span class="sd">    """</span>
    <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variable_list</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
        <span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">constant</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.to_symbolic" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_symbolic</span><span class="p">(</span><span class="n">term</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.to_symbolic" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Translates the variable terms of a PolyhedralTerm into a sympy expression.</p>

<details class="example">
  <summary>Example</summary>
  <p>The code</p>
<div class="highlight"><pre><span></span><code>    x = Var('x') y = Var('y') variables = {x:-2, y:3} constant  = 4
    term = PolyhedralTerm(variables, constant) expression =
    PolyhedralTerm.to_symbolic(term)
</code></pre></div>
<p>yields the expression <span class="arithmatex">\(-2x + 3y\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>term</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>The term whose coefficients and variables are to be translated
to sympy's data structure.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td><p>Sympy expression corresponding to PolyhedralTerm.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">to_symbolic</span><span class="p">(</span><span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Translates the variable terms of a PolyhedralTerm into a sympy expression.</span>

<span class="sd">    Example:</span>
<span class="sd">        The code</span>

<span class="sd">        ```</span>
<span class="sd">            x = Var('x') y = Var('y') variables = {x:-2, y:3} constant  = 4</span>
<span class="sd">            term = PolyhedralTerm(variables, constant) expression =</span>
<span class="sd">            PolyhedralTerm.to_symbolic(term)</span>
<span class="sd">        ```</span>

<span class="sd">        yields the expression $-2x + 3y$.</span>

<span class="sd">    Args:</span>
<span class="sd">        term:</span>
<span class="sd">            The term whose coefficients and variables are to be translated</span>
<span class="sd">            to sympy's data structure.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Sympy expression corresponding to PolyhedralTerm.</span>
<span class="sd">    """</span>
    <span class="n">ex</span> <span class="o">=</span> <span class="o">-</span><span class="n">term</span><span class="o">.</span><span class="n">constant</span>
    <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
        <span class="n">sv</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">ex</span> <span class="o">+=</span> <span class="n">sv</span> <span class="o">*</span> <span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ex</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTerm.to_term" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_term</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm.to_term" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Translates a sympy expression into a PolyhedralTerm.</p>

<details class="example">
  <summary>Example</summary>
  <p>The expression <span class="arithmatex">\(2x + 3y - 1\)</span> is translated into
<code>PolyhedralTerm(variables={x:2, y:3}, constant=1)</code>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>expression</code></td>
          <td>
                <code>sympy.<span title="sympy.core">core</span>.<span title="sympy.core.expr">expr</span>.<span title="sympy.core.expr.Expr">Expr</span></code>
          </td>
          <td><p>The symbolic expression to be translated.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a></code>
          </td>
          <td><p>PolyhedralTerm corresponding to sympy expression.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">to_term</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="n">sympy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">Expr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Translates a sympy expression into a PolyhedralTerm.</span>

<span class="sd">    Example:</span>
<span class="sd">        The expression $2x + 3y - 1$ is translated into</span>
<span class="sd">        `PolyhedralTerm(variables={x:2, y:3}, constant=1)`.</span>

<span class="sd">    Args:</span>
<span class="sd">        expression: The symbolic expression to be translated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        PolyhedralTerm corresponding to sympy expression.</span>
<span class="sd">    """</span>
    <span class="n">expression_coefficients</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">expression</span><span class="o">.</span><span class="n">as_coefficients_dict</span><span class="p">()</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">expression_coefficients</span><span class="p">)</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">expression_coefficients</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">sympy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">Symbol</span><span class="p">)):</span>
            <span class="n">var</span> <span class="o">=</span> <span class="n">Var</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">variable_dict</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="n">expression_coefficients</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">constant</span> <span class="o">=</span> <span class="n">constant</span> <span class="o">-</span> <span class="n">expression_coefficients</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">*</span> <span class="n">key</span>
    <span class="k">return</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variable_dict</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" class="doc doc-heading">
        <code>PolyhedralTermList</code>


<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList" class="headerlink" title="Permanent link">Â¶</a></h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pacti.iocontract.TermList" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.TermList">TermList</a></code></p>

  
      <p>A TermList of PolyhedralTerm instances.</p>


        <details class="quote">
          <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PolyhedralTermList</span><span class="p">(</span><span class="n">TermList</span><span class="p">):</span>  <span class="c1"># noqa: WPS338</span>
<span class="w">    </span><span class="sd">"""A TermList of PolyhedralTerm instances."""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">terms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">PolyhedralTerm</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Constructor for PolyhedralTermList.</span>

<span class="sd">        Usage:</span>
<span class="sd">            PolyhedralTermList objects are initialized as follows:</span>

<span class="sd">            ```</span>
<span class="sd">                term1 = PolyhedralTerm({Var('x'):2, Var('y'):3}, 3)</span>
<span class="sd">                term2 = PolyhedralTerm({Var('x'):-1, Var('y'):2}, 4)</span>
<span class="sd">                pt_list = [term1, term2]</span>
<span class="sd">                termlist = PolyhedralTermList(pt_list)</span>
<span class="sd">            ```</span>

<span class="sd">            Our example represents the constraints $\\{2x + 3y \\le 3, -x + 2y \\le 4\\}$.</span>

<span class="sd">        Args:</span>
<span class="sd">            terms: A list of PolyhedralTerm objects.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: incorrect argument type provided.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">terms</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">PolyhedralTerm</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="n">terms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"PolyhedralTermList constructor argument must be a list of PolyhedralTerms."</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="s2">"[</span><span class="se">\n</span><span class="s2">  "</span>
        <span class="n">res</span> <span class="o">+=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">  "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_str_list</span><span class="p">())</span>
        <span class="n">res</span> <span class="o">+=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">]"</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">to_str_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Convert termlist into a list of strings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of strings corresponding to the terms of the termlist.</span>
<span class="sd">        """</span>
        <span class="n">str_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">ts</span><span class="p">:</span>
            <span class="n">s</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">polyhedral_term_list_to_strings</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
            <span class="n">str_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="n">rest</span>
        <span class="k">return</span> <span class="n">str_list</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>  <span class="c1"># noqa: WPS231</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Replace variables in termlist with given values.</span>

<span class="sd">        Args:</span>
<span class="sd">            var_values:</span>
<span class="sd">                The values that variables will take.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PolyhedralTermList in which the variables have been</span>
<span class="sd">            substituted with the values provided.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: constraints are unsatisfiable under these valuation of variables.</span>
<span class="sd">        """</span>
        <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
            <span class="n">new_term</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">var_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># noqa: VNE002</span>
                <span class="n">new_term</span> <span class="o">=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">substitute_variable</span><span class="p">(</span>
                    <span class="n">var</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">subst_with_term</span><span class="o">=</span><span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="p">{},</span> <span class="n">constant</span><span class="o">=-</span><span class="n">val</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="c1"># we may have eliminated all variables after substitution</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">new_term</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">new_term</span><span class="o">.</span><span class="n">constant</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Term </span><span class="si">%s</span><span class="s2"> not satisfied"</span> <span class="o">%</span> <span class="p">(</span><span class="n">term</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">continue</span>  <span class="c1"># noqa: WPS503</span>
            <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_term</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contains_behavior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">behavior</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Tell whether TermList contains the given behavior.</span>

<span class="sd">        Args:</span>
<span class="sd">            behavior:</span>
<span class="sd">                The behavior in question.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the behavior satisfies the constraints; false otherwise.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Not all variables in the constraints were assigned values.</span>
<span class="sd">        """</span>
        <span class="n">excess_vars</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">behavior</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="k">if</span> <span class="n">excess_vars</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"The variables </span><span class="si">%s</span><span class="s2"> were not assigned values"</span> <span class="o">%</span> <span class="p">(</span><span class="n">excess_vars</span><span class="p">))</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">behavior</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">retval</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">retval</span>

    <span class="k">def</span> <span class="nf">elim_vars_by_refining</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Eliminate variables from PolyhedralTermList by refining it in context.</span>

<span class="sd">        Example:</span>
<span class="sd">            Suppose the current list of terms is $\\{x + y \\le 6\\}$, the</span>
<span class="sd">            context is $\\{y \\le 5\\}$, and the resulting terms should not</span>
<span class="sd">            contain variable $y$. Then the current TermList could be</span>
<span class="sd">            refined to $\\{x \\le 1\\}$ because $x \\le 1</span>
<span class="sd">            \\;\\land\\; y \\le 5 \\Rightarrow x + y \\le 6$.</span>

<span class="sd">        Args:</span>
<span class="sd">            context:</span>
<span class="sd">                The TermList providing the context for the refinement.</span>
<span class="sd">            vars_to_elim:</span>
<span class="sd">                Variables that should not appear in the resulting term.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of terms not containing any variables in `vars_to_elim`</span>
<span class="sd">            and which, in the context provided, imply the terms contained in the</span>
<span class="sd">            calling termlist.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Self has empty intersection with its context.</span>
<span class="sd">        """</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Refining from terms: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars to elim: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">termlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Provided constraints </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"are unsatisfiable in context </span><span class="se">\n</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">termlist</span><span class="o">.</span><span class="n">_transform</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="o">=</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"The elimination of variables </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vars_to_elim</span><span class="p">])</span>
                <span class="o">+</span> <span class="s2">"by refining terms </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">"in context </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">"was not possible"</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

    <span class="k">def</span> <span class="nf">lacks_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Tell whether TermList is empty.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if empty. False otherwise.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">elim_vars_by_relaxing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Eliminate variables from PolyhedralTermList by abstracting it in context.</span>

<span class="sd">        Example:</span>
<span class="sd">            Suppose the current list of terms is $\\{x - y \\le 6\\}$, the</span>
<span class="sd">            context is $\\{y \\le 5\\}$, and the resulting terms should not</span>
<span class="sd">            contain variable $y$. Then the current TermList could be</span>
<span class="sd">            relaxed to $\\{x \\le 11\\}$ because $x - y \\le 6</span>
<span class="sd">            \\;\\land\\; y \\le 5 \\Rightarrow x \\le 11$.</span>

<span class="sd">        Args:</span>
<span class="sd">            context:</span>
<span class="sd">                The TermList providing the context for the transformation.</span>
<span class="sd">            vars_to_elim:</span>
<span class="sd">                Variables that should not appear in the relaxed terms.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of terms not containing any variables in `vars_to_elim`</span>
<span class="sd">            and which, in the context provided, are implied by the terms</span>
<span class="sd">            contained in the calling termlist.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Constraints have empty intersection with context.</span>
<span class="sd">        """</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Relaxing with context"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Relaxing from terms </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars to elim: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">termlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Provided constraints </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"are unsatisfiable in context </span><span class="se">\n</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">termlist</span> <span class="o">=</span> <span class="n">termlist</span><span class="o">.</span><span class="n">_transform</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="o">=</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"The elimination of variables </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vars_to_elim</span><span class="p">])</span>
                <span class="o">+</span> <span class="s2">"by relaxing terms </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">"in context </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                <span class="o">+</span> <span class="s2">"was not possible"</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="c1"># eliminate terms containing the variables to be eliminated</span>
        <span class="n">terms_to_elim</span> <span class="o">=</span> <span class="n">termlist</span><span class="o">.</span><span class="n">get_terms_with_vars</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">)</span>
        <span class="n">termlist</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">termlist</span><span class="o">.</span><span class="n">terms</span><span class="p">,</span> <span class="n">terms_to_elim</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">termlist</span>

    <span class="k">def</span> <span class="nf">simplify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PolyhedralTermList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Remove redundant terms in the PolyhedralTermList using the provided context.</span>

<span class="sd">        Example:</span>
<span class="sd">            Suppose the TermList is $\\{x - 2y \\le 5, x - y \\le 0\\}$ and</span>
<span class="sd">            the context is $\\{x + y \\le 0\\}$. Then the TermList could be</span>
<span class="sd">            simplified to $\\{x - y \\le 0\\}$.</span>

<span class="sd">        Args:</span>
<span class="sd">            context:</span>
<span class="sd">                The TermList providing the context for the simplification.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PolyhedralTermList with redundant terms removed using the provided context.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: The intersection of self and context is empty.</span>
<span class="sd">        """</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Starting simplification procedure"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Simplifying terms: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">new_self</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">context</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="n">new_self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">PolyhedralTermList</span><span class="p">())</span>

        <span class="n">variables</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">self_mat</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">self_cons</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">ctx_mat</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">ctx_cons</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="c1"># logging.debug("Polytope is \n%s", self_mat)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">a_red</span><span class="p">,</span> <span class="n">b_red</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">reduce_polytope</span><span class="p">(</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">ctx_mat</span><span class="p">,</span> <span class="n">ctx_cons</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"The constraints </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"are unsatisfiable in context </span><span class="se">\n</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Reduction: </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a_red</span><span class="p">)</span>
        <span class="n">simplified</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">polytope_to_termlist</span><span class="p">(</span><span class="n">a_red</span><span class="p">,</span> <span class="n">b_red</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Back to terms: </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">simplified</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">simplified</span>

    <span class="k">def</span> <span class="nf">refines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Tells whether the argument is a larger specification.</span>

<span class="sd">        Args:</span>
<span class="sd">            other:</span>
<span class="sd">                TermList against which we are comparing self.</span>

<span class="sd">        Returns:</span>
<span class="sd">            self &lt;= other</span>
<span class="sd">        """</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Verifying refinement"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"LH term: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"RH term: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">lacks_constraints</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lacks_constraints</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">variables</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">ctx_mat</span><span class="p">,</span> <span class="n">ctx_cons</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span>  <span class="c1"># noqa: WPS236</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">other</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Polytope is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">verify_polytope_containment</span><span class="p">(</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">ctx_mat</span><span class="p">,</span> <span class="n">ctx_cons</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Tell whether the argument has no satisfying assignments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if constraints cannot be satisfied.</span>
<span class="sd">        """</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span>  <span class="c1"># noqa: WPS236</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">PolyhedralTermList</span><span class="p">([])</span>
        <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Polytope is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Transforming: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context terms: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Variables to eliminate: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
        <span class="n">term_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span>
        <span class="n">new_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">term</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">term_list</span><span class="p">):</span>
            <span class="n">copy_new_terms</span> <span class="o">=</span> <span class="n">new_terms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">copy_new_terms</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
            <span class="n">helpers</span> <span class="o">=</span> <span class="n">context</span> <span class="o">|</span> <span class="n">copy_new_terms</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_term</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_transform_term</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">helpers</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">new_term</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

            <span class="n">new_terms</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">that</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="n">new_terms</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span>

        <span class="c1"># the last step needs to be a simplification</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Ending transformation with simplification"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">that</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">],</span> <span class="n">maximize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numeric</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Optimizes a linear expression in the feasible region of the termlist.</span>

<span class="sd">        Args:</span>
<span class="sd">            objective:</span>
<span class="sd">                The objective to optimize.</span>
<span class="sd">            maximize:</span>
<span class="sd">                If true, the routine maximizes; it minimizes otherwise.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The optimal value of the objective. If the objective is unbounded, None is returned.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Constraints are likely unfeasible.</span>
<span class="sd">        """</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="p">([</span><span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">)])</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">obj_mat</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>  <span class="c1"># noqa: WPS236</span>
        <span class="n">polarity</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">maximize</span><span class="p">:</span>
            <span class="n">polarity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">polarity</span> <span class="o">*</span> <span class="n">obj_mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">self_cons</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="c1"># Linprog's status values</span>
        <span class="c1"># 0 : Optimization proceeding nominally.</span>
        <span class="c1"># 1 : Iteration limit reached.</span>
        <span class="c1"># 2 : Problem appears to be infeasible.</span>
        <span class="c1"># 3 : Problem appears to be unbounded.</span>
        <span class="c1"># 4 : Numerical difficulties encountered.</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">fun_val</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">polarity</span> <span class="o">*</span> <span class="n">fun_val</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Constraints are unfeasible"</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">termlist_to_polytope</span><span class="p">(</span>
        <span class="n">terms</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Converts a list of terms with its context into matrix-vector pairs.</span>

<span class="sd">        Example:</span>
<span class="sd">            Suppose the list of terms is $\\{x+y \\le 1, x - y \\le 4\\}$</span>
<span class="sd">            and the context is $\\{x + 4w \\le 5\\}$. The routine extracts</span>
<span class="sd">            all variables and generates an order for them, say, $[x, w,</span>
<span class="sd">            y]$. Then the routine returns matrix-vector pairs for both the terms</span>
<span class="sd">            TermList and the context. It returns $A = \\left(</span>
<span class="sd">            \\begin{smallmatrix} 1 &amp; 0 &amp; 1 \\\\ 1 &amp;0 &amp;-1</span>
<span class="sd">            \\end{smallmatrix}\\right)$ and $b = \\left(</span>
<span class="sd">            \\begin{smallmatrix} 1 \\\\ 4 \\end{smallmatrix}\\right)$ for the</span>
<span class="sd">            current TermList and $A_{c} = \\left( \\begin{smallmatrix} 1 &amp;</span>
<span class="sd">            4 &amp; 0 \\end{smallmatrix}\\right)$ and $b_c = \\left(</span>
<span class="sd">            \\begin{smallmatrix} 5 \\end{smallmatrix}\\right)$ for the context.</span>

<span class="sd">        Args:</span>
<span class="sd">            terms:</span>
<span class="sd">                list of terms to convert to matrix-vector form.</span>
<span class="sd">            context:</span>
<span class="sd">                Context terms to convert to matrix-vector form.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple `variables, A, b, a_h, b_h` consisting of the variable</span>
<span class="sd">            order and the matrix-vector pairs for the terms and the context.</span>
<span class="sd">        """</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">list_union</span><span class="p">(</span><span class="n">terms</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">vars</span><span class="p">))</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
            <span class="n">pol</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pol</span><span class="p">)</span>
            <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>

        <span class="n">a_h</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">b_h</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
            <span class="n">pol</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
            <span class="n">a_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pol</span><span class="p">)</span>
            <span class="n">b_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">a_h_ret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a_h_ret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a_h</span><span class="p">)</span>
        <span class="c1"># logging.debug("a is \n%s", a)</span>
        <span class="k">return</span> <span class="n">variables</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">a_h_ret</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b_h</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">polytope_to_termlist</span><span class="p">(</span><span class="n">matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Transforms a matrix-vector pair into a PolyhedralTermList.</span>

<span class="sd">        Args:</span>
<span class="sd">            matrix:</span>
<span class="sd">                The matrix of the pair.</span>
<span class="sd">            vector:</span>
<span class="sd">                The vector of the pair.</span>
<span class="sd">            variables:</span>
<span class="sd">                A list indicating the variable which corresponds to each column</span>
<span class="sd">                of the matrix.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The PolyhedralTermList corresponding to the given data.</span>
<span class="sd">        """</span>
        <span class="n">term_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># logging.debug("Poly is " + str(polytope))</span>
        <span class="c1"># logging.debug("matrix is %s", matrix)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">assert</span> <span class="n">m</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">const</span> <span class="o">=</span> <span class="n">vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">term</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">polytope_to_term</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">const</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
            <span class="n">term_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">term_list</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">reduce_polytope</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
        <span class="n">a</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">a_help</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">b_help</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Eliminate redundant constraints from a given polytope.</span>

<span class="sd">        Args:</span>
<span class="sd">            a:</span>
<span class="sd">                Matrix of H-representation of polytope to reduce.</span>
<span class="sd">            b:</span>
<span class="sd">                Vector of H-representation of polytope to reduce.</span>
<span class="sd">            a_help:</span>
<span class="sd">                Matrix of H-representation of context polytope.</span>
<span class="sd">            b_help:</span>
<span class="sd">                Vector of H-representation of context polytope.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: The intersection of given polytope with its context is empty.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a_temp: Matrix of H-representation of reduced polytope.</span>
<span class="sd">            b_temp: Vector of H-representation of reduced polytope.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_help</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">a_help</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b_help</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">b_help</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n_h</span><span class="p">,</span> <span class="n">m_h</span> <span class="o">=</span> <span class="n">a_help</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">helper_present</span> <span class="o">=</span> <span class="n">n_h</span> <span class="o">*</span> <span class="n">m_h</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="s2">"n is </span><span class="si">{}</span><span class="s2"> and b is </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">helper_present</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">n_h</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_help</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_help</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">helper_present</span> <span class="ow">and</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">m_h</span> <span class="o">==</span> <span class="n">m</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">helper_present</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">a_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">objective</span> <span class="o">=</span> <span class="n">a_temp</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">b_temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">helper_present</span><span class="p">:</span>
                <span class="n">a_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a_temp</span><span class="p">,</span> <span class="n">a_help</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">b_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">b_temp</span><span class="p">,</span> <span class="n">b_help</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a_opt</span> <span class="o">=</span> <span class="n">a_temp</span>
                <span class="n">b_opt</span> <span class="o">=</span> <span class="n">b_temp</span>
            <span class="c1"># Linprog's status values</span>
            <span class="c1"># 0 : Optimization proceeding nominally.</span>
            <span class="c1"># 1 : Iteration limit reached.</span>
            <span class="c1"># 2 : Problem appears to be infeasible.</span>
            <span class="c1"># 3 : Problem appears to be unbounded.</span>
            <span class="c1"># 4 : Numerical difficulties encountered.</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">a_opt</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b_opt</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># ,options={'tol':0.000001})</span>
            <span class="n">b_temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="o">-</span><span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">b_temp</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>  <span class="c1"># noqa: WPS309</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Can remove"</span><span class="p">)</span>
                <span class="n">a_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">a_temp</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">b_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">b_temp</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"The constraints are unsatisfiable"</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">a_temp</span><span class="p">,</span> <span class="n">b_temp</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">verify_polytope_containment</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
        <span class="n">a_l</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">b_l</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">a_r</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">b_r</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Tell whether a polytope is contained in another.</span>

<span class="sd">        Args:</span>
<span class="sd">            a_l:</span>
<span class="sd">                Matrix of H-representation of polytope on LHS of inequality.</span>
<span class="sd">            b_l:</span>
<span class="sd">                Vector of H-representation of polytope on LHS of inequality.</span>
<span class="sd">            a_r:</span>
<span class="sd">                Matrix of H-representation of polytope on RHS of inequality.</span>
<span class="sd">            b_r:</span>
<span class="sd">                Vector of H-representation of polytope on RHS of inequality.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if left polytope is contained in right polytope. False otherwise.</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_l</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">a_l</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_r</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">a_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b_l</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">b_l</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b_r</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">b_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="c1"># If the LHS is empty, it is a refinement</span>
        <span class="k">if</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">a_l</span><span class="p">,</span> <span class="n">b_l</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># If the RHS is empty, but not the LHS, not a refinement</span>
        <span class="k">if</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">a_r</span><span class="p">,</span> <span class="n">b_r</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># If no side is empty, check whether the RHS terms are included in the</span>
        <span class="c1"># LHS</span>
        <span class="n">n_l</span><span class="p">,</span> <span class="n">m_l</span> <span class="o">=</span> <span class="n">a_l</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">n_r</span><span class="p">,</span> <span class="n">m_r</span> <span class="o">=</span> <span class="n">a_r</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">assert</span> <span class="n">m_l</span> <span class="o">==</span> <span class="n">m_r</span>
        <span class="k">assert</span> <span class="n">n_l</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_l</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">n_r</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_r</span><span class="p">)</span>

        <span class="n">is_refinement</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_r</span><span class="p">):</span>
            <span class="n">constraint</span> <span class="o">=</span> <span class="n">a_r</span><span class="p">[[</span><span class="n">i</span><span class="p">],</span> <span class="p">:]</span>
            <span class="n">objective</span> <span class="o">=</span> <span class="n">constraint</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">b_temp</span> <span class="o">=</span> <span class="n">b_r</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Optimization objective: </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">objective</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"a_l is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a_l</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"a_r is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a_r</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"b_l is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">b_l</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"b_r is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">b_r</span><span class="p">)</span>

            <span class="n">a_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a_l</span><span class="p">,</span> <span class="n">constraint</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">b_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">b_l</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">b_temp</span><span class="p">])))</span>

            <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">a_opt</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b_opt</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># ,options={'tol':0.000001})</span>
            <span class="n">b_temp</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">is_refinement</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="o">-</span><span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">b_temp</span><span class="p">:</span>  <span class="c1"># noqa: WPS309</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Redundant constraint"</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">is_refinement</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Optimal value: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="o">-</span><span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">])</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Results: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_refinement</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_polytope_empty</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Say whether a polytope is empty.</span>

<span class="sd">        Args:</span>
<span class="sd">            a:</span>
<span class="sd">                Matrix of H-representation of polytope to verify.</span>
<span class="sd">            b:</span>
<span class="sd">                Vector of H-representation of polytope to verify.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if empty. False otherwise.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: Numerical difficulties encountered.</span>
<span class="sd">        """</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Verifying polytope emptiness: a is </span><span class="si">%s</span><span class="s2"> a.shape is </span><span class="si">%s</span><span class="s2">, b is </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">*</span> <span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">objective</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># ,options={'tol':0.000001})</span>
        <span class="c1"># Linprog's status values</span>
        <span class="c1"># 0 : Optimization proceeding nominally.</span>
        <span class="c1"># 1 : Iteration limit reached.</span>
        <span class="c1"># 2 : Problem appears to be infeasible.</span>
        <span class="c1"># 3 : Problem appears to be unbounded.</span>
        <span class="c1"># 4 : Numerical difficulties encountered.</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">}:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Cannot decide emptiness"</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_kaykobad_context</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
        <span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">PolyhedralTerm</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">]]:</span>
        <span class="n">forbidden_vars</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
        <span class="n">other_forbibben_vars</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">forbidden_vars</span><span class="p">)</span>
        <span class="n">matrix_row_terms</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[PolyhedralTerm]</span>
        <span class="n">partial_sums</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">transform_coeff</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">refine</span><span class="p">:</span>
            <span class="n">transform_coeff</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">matrix_contains_others</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># We add a row to the matrix in each iteration</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">i_var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">forbidden_vars</span><span class="p">):</span>
            <span class="n">row_found</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Iterating for variable </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">i_var</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">context_term</span> <span class="ow">in</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">,</span> <span class="n">matrix_row_terms</span><span class="p">):</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Analyzing context term </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context_term</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">context_term</span> <span class="o">==</span> <span class="n">term</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">term_is_invalid</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="c1"># make sure the term does not include other forbidden variables</span>
                <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">other_forbibben_vars</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
                    <span class="k">if</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">term_is_invalid</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Term contains other forbidden vars"</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">term_is_invalid</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="c1"># 1. Verify Kaykobad pair: sign of nonzero matrix terms</span>
                <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">forbidden_vars</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
                    <span class="k">if</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">transform_coeff</span> <span class="o">*</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_sign</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">!=</span> <span class="n">term</span><span class="o">.</span><span class="n">get_sign</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
                            <span class="n">term_is_invalid</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="c1"># logging.debug("Failed first matrix-vector verification")</span>
                            <span class="k">break</span>
                <span class="c1"># 2. Verify Kaykobad pair: matrix diagonal terms</span>
                <span class="k">if</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">i_var</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">term_is_invalid</span><span class="p">:</span>
                    <span class="c1"># logging.debug("Failed second matrix-vector verification")</span>
                    <span class="k">continue</span>
                <span class="c1"># 3. Verify Kaykobad pair: relation between matrix and vector</span>
                <span class="n">residuals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">j_var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">forbidden_vars</span><span class="p">):</span>
                    <span class="c1"># logging.debug("Verifying third condition on variable %s", j_var)</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="n">i</span><span class="p">:</span>
                        <span class="n">residuals</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">term</span><span class="o">.</span><span class="n">get_sign</span><span class="p">(</span><span class="n">j_var</span><span class="p">)</span>
                            <span class="o">*</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">j_var</span><span class="p">)</span>
                            <span class="o">*</span> <span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">i_var</span><span class="p">)</span>
                            <span class="o">/</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">i_var</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">j_var</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">partial_sums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">residuals</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                        <span class="c1"># logging.debug("q coefficient: %s", term.get_coefficient(j_var))</span>
                        <span class="c1"># logging.debug("RHS: %s", partial_sums[j] + residuals[j])</span>
                        <span class="n">term_is_invalid</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="c1"># logging.debug("Failed third matrix-vector verification")</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">term_is_invalid</span><span class="p">:</span>
                    <span class="n">matrix_contains_others</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">matrix_contains_others</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_diff</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">forbidden_vars</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span>
                    <span class="p">)</span>
                    <span class="n">row_found</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                        <span class="n">partial_sums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">residuals</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">matrix_row_terms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">context_term</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">row_found</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Could not find the </span><span class="si">{}</span><span class="s2">th row of matrix"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">matrix_contains_others</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_diff</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Found context will produce empty transformation"</span><span class="p">)</span>
        <span class="c1"># logging.debug("Matrix row terms %s", matrix_row_terms)</span>
        <span class="k">return</span> <span class="n">matrix_row_terms</span><span class="p">,</span> <span class="n">forbidden_vars</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_tactic_1</span><span class="p">(</span>
        <span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"********** Tactic 1"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars_to_elim </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Term </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Context </span><span class="si">%s</span><span class="s2"> "</span> <span class="o">%</span> <span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">matrix_row_terms</span><span class="p">,</span> <span class="n">forbidden_vars</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_get_kaykobad_context</span><span class="p">(</span>
                <span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Could not transform </span><span class="si">%s</span><span class="s2"> using Tactic 1"</span><span class="p">,</span> <span class="n">term</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Could not transform term </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">term</span><span class="p">))</span>
        <span class="n">matrix_row_terms_tl</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">matrix_row_terms</span><span class="p">))</span>
        <span class="n">sols</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">solve_for_variables</span><span class="p">(</span><span class="n">matrix_row_terms_tl</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">forbidden_vars</span><span class="p">))</span>
        <span class="c1"># logging.debug("Sols %s", sols)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="c1"># logging.debug("Result is %s", result)</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">sols</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">substitute_variable</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">sols</span><span class="p">[</span><span class="n">var</span><span class="p">])</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Term </span><span class="si">%s</span><span class="s2"> transformed to </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_tactic_2</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
        <span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"************ Tactic 2"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars_to_elim </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Term </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Context </span><span class="si">%s</span><span class="s2"> "</span> <span class="o">%</span> <span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
        <span class="n">conflict_vars</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
        <span class="n">new_context_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Extract from context the terms that only contain forbidden vars</span>
        <span class="k">for</span> <span class="n">context_term</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">context_term</span> <span class="o">!=</span> <span class="n">term</span><span class="p">:</span>
                    <span class="n">new_context_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"This is what we kept"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">new_context_list</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_context_list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"No term contains only irrelevant variables"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">conflict_vars</span><span class="p">,</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="n">new_context_list</span><span class="p">)</span><span class="o">.</span><span class="n">vars</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Tactic 2 unsuccessful"</span><span class="p">)</span>
        <span class="c1"># now optimize</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="n">PolyhedralTermList</span><span class="p">(</span><span class="n">new_context_list</span><span class="p">),</span> <span class="n">PolyhedralTermList</span><span class="p">([]))</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="n">retval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">new_context_mat</span> <span class="o">=</span> <span class="n">retval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">new_context_cons</span> <span class="o">=</span> <span class="n">retval</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">polarity</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">refine</span><span class="p">:</span>
            <span class="n">polarity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">objective</span> <span class="o">=</span> <span class="p">[</span><span class="n">polarity</span> <span class="o">*</span> <span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">new_context_mat</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">new_context_cons</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">new_context_mat</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">new_context_cons</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="c1"># unbounded</span>
            <span class="c1"># return term.copy()</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Tactic 2 did not succeed"</span><span class="p">)</span>
        <span class="n">replacement</span> <span class="o">=</span> <span class="n">polarity</span> <span class="o">*</span> <span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span>
        <span class="c1"># replace the irrelevant variables with new findings in term</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">vars_to_elim</span><span class="p">:</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">remove_variable</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">constant</span> <span class="o">-=</span> <span class="n">replacement</span>
        <span class="c1"># check vacuity</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_tactic_3</span><span class="p">(</span>
        <span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"************ Tactic 3"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars_to_elim </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Term </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Context </span><span class="si">%s</span><span class="s2"> "</span> <span class="o">%</span> <span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
        <span class="n">conflict_vars</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
        <span class="n">conflict_coeff</span> <span class="o">=</span> <span class="p">{</span><span class="n">var</span><span class="p">:</span> <span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">conflict_vars</span><span class="p">}</span>
        <span class="n">new_term</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">conflict_vars</span><span class="p">:</span>  <span class="c1"># noqa: VNE002 variable name 'var' should be clarified</span>
            <span class="n">new_term</span> <span class="o">=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">remove_variable</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="n">new_term</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">Var</span><span class="p">(</span><span class="s2">"_"</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1"># modify the context</span>
        <span class="n">subst_term_vars</span> <span class="o">=</span> <span class="p">{</span><span class="n">Var</span><span class="p">(</span><span class="s2">"_"</span><span class="p">):</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">conflict_coeff</span><span class="p">[</span><span class="n">conflict_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]]}</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">conflict_vars</span><span class="p">:</span>  <span class="c1"># noqa: VNE002 variable name 'var' should be clarified</span>
            <span class="k">if</span> <span class="n">var</span> <span class="o">!=</span> <span class="n">conflict_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">subst_term_vars</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">conflict_coeff</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">/</span> <span class="n">conflict_coeff</span><span class="p">[</span><span class="n">conflict_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">subst_term</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="n">subst_term_vars</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">new_context</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="p">(</span>
            <span class="p">[</span><span class="n">el</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">substitute_variable</span><span class="p">(</span><span class="n">conflict_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">subst_term</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="c1"># now we use tactic 1</span>
        <span class="n">new_elims</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">list_union</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="p">[</span><span class="n">Var</span><span class="p">(</span><span class="s2">"_"</span><span class="p">)]),</span> <span class="p">[</span><span class="n">conflict_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_tactic_1</span><span class="p">(</span><span class="n">new_term</span><span class="p">,</span> <span class="n">new_context</span><span class="p">,</span> <span class="n">new_elims</span><span class="p">,</span> <span class="n">refine</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># noqa: WPS329 Found useless `except` case</span>
            <span class="k">raise</span> <span class="n">e</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"************ Leaving Tactic 3"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars_to_elim </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Term </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Context </span><span class="si">%s</span><span class="s2"> "</span> <span class="o">%</span> <span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_tactic_4</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
        <span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">no_vars</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"************ Tactic 4"</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars_to_elim </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Term </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">Context </span><span class="si">%s</span><span class="s2"> "</span> <span class="o">%</span> <span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">refine</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Only refinement is supported"</span><span class="p">)</span>
        <span class="n">conflict_vars</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conflict_vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Tactic 4 unsuccessful"</span><span class="p">)</span>
        <span class="n">var_to_elim</span> <span class="o">=</span> <span class="n">conflict_vars</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">goal_context</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PolyhedralTerm</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">useful_context</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PolyhedralTerm</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">polarity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">refine</span><span class="p">:</span>
            <span class="n">polarity</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">context_term</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">no_vars</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">coeff</span> <span class="o">=</span> <span class="n">context_term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">polarity</span> <span class="o">*</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">term</span><span class="o">.</span><span class="n">get_coefficient</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">temp_conflict_vars</span> <span class="o">=</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_conflict_vars</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">goal_context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_conflict_vars</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">useful_context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">context_term</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">useful_context</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">goal_context</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Tactic 4 unsuccessful"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">goal_context</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">term</span><span class="o">.</span><span class="n">substitute_variable</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">,</span> <span class="n">goal_context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isolate_variable</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">))</span>
        <span class="c1">############</span>
        <span class="k">for</span> <span class="n">useful_term</span> <span class="ow">in</span> <span class="n">useful_context</span><span class="p">:</span>
            <span class="n">new_context</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">new_context</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">useful_term</span><span class="p">)</span>
            <span class="n">new_term</span> <span class="o">=</span> <span class="n">useful_term</span><span class="o">.</span><span class="n">isolate_variable</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">)</span>
            <span class="n">new_no_vars</span> <span class="o">=</span> <span class="n">no_vars</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">new_no_vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">return_term</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_tactic_4</span><span class="p">(</span><span class="n">new_term</span><span class="p">,</span> <span class="n">new_context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="p">,</span> <span class="n">new_no_vars</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="n">term</span><span class="o">.</span><span class="n">substitute_variable</span><span class="p">(</span><span class="n">var_to_elim</span><span class="p">,</span> <span class="n">return_term</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Tactic 4 unsuccessful"</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_transform_term</span><span class="p">(</span>
        <span class="n">term</span><span class="p">:</span> <span class="n">PolyhedralTerm</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">refine</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTerm</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">list_intersection</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">term</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Transforming term: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">term</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_tactic_1</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>  <span class="c1"># noqa: WPS505</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_tactic_3</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>  <span class="c1"># noqa: WPS505 Found nested `try` block</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_tactic_2</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>  <span class="c1"># noqa: WPS505 Found nested `try` block</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">_tactic_4</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="p">,</span> <span class="p">[])</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">terms</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.__init__" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Constructor for PolyhedralTermList.</p>

<details class="usage">
  <summary>Usage</summary>
  <p>PolyhedralTermList objects are initialized as follows:</p>
<div class="highlight"><pre><span></span><code>    term1 = PolyhedralTerm({Var('x'):2, Var('y'):3}, 3)
    term2 = PolyhedralTerm({Var('x'):-1, Var('y'):2}, 4)
    pt_list = [term1, term2]
    termlist = PolyhedralTermList(pt_list)
</code></pre></div>
<p>Our example represents the constraints <span class="arithmatex">\(\{2x + 3y \le 3, -x + 2y \le 4\}\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>terms</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTerm" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTerm">PolyhedralTerm</a>]]</code>
          </td>
          <td><p>A list of PolyhedralTerm objects.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>incorrect argument type provided.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">terms</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">PolyhedralTerm</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Constructor for PolyhedralTermList.</span>

<span class="sd">    Usage:</span>
<span class="sd">        PolyhedralTermList objects are initialized as follows:</span>

<span class="sd">        ```</span>
<span class="sd">            term1 = PolyhedralTerm({Var('x'):2, Var('y'):3}, 3)</span>
<span class="sd">            term2 = PolyhedralTerm({Var('x'):-1, Var('y'):2}, 4)</span>
<span class="sd">            pt_list = [term1, term2]</span>
<span class="sd">            termlist = PolyhedralTermList(pt_list)</span>
<span class="sd">        ```</span>

<span class="sd">        Our example represents the constraints $\\{2x + 3y \\le 3, -x + 2y \\le 4\\}$.</span>

<span class="sd">    Args:</span>
<span class="sd">        terms: A list of PolyhedralTerm objects.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: incorrect argument type provided.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">terms</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">PolyhedralTerm</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">terms</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="n">terms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"PolyhedralTermList constructor argument must be a list of PolyhedralTerms."</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.contains_behavior" class="doc doc-heading">
<code class="highlight language-python"><span class="n">contains_behavior</span><span class="p">(</span><span class="n">behavior</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.contains_behavior" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Tell whether TermList contains the given behavior.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>behavior</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>, <span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>The behavior in question.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>True if the behavior satisfies the constraints; false otherwise.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>Not all variables in the constraints were assigned values.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">contains_behavior</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">behavior</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Tell whether TermList contains the given behavior.</span>

<span class="sd">    Args:</span>
<span class="sd">        behavior:</span>
<span class="sd">            The behavior in question.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the behavior satisfies the constraints; false otherwise.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Not all variables in the constraints were assigned values.</span>
<span class="sd">    """</span>
    <span class="n">excess_vars</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">behavior</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
    <span class="k">if</span> <span class="n">excess_vars</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"The variables </span><span class="si">%s</span><span class="s2"> were not assigned values"</span> <span class="o">%</span> <span class="p">(</span><span class="n">excess_vars</span><span class="p">))</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">behavior</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">retval</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.elim_vars_by_refining" class="doc doc-heading">
<code class="highlight language-python"><span class="n">elim_vars_by_refining</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.elim_vars_by_refining" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Eliminate variables from PolyhedralTermList by refining it in context.</p>

<details class="example">
  <summary>Example</summary>
  <p>Suppose the current list of terms is <span class="arithmatex">\(\{x + y \le 6\}\)</span>, the
context is <span class="arithmatex">\(\{y \le 5\}\)</span>, and the resulting terms should not
contain variable <span class="arithmatex">\(y\)</span>. Then the current TermList could be
refined to <span class="arithmatex">\(\{x \le 1\}\)</span> because <span class="arithmatex">\(x \le 1
\;\land\; y \le 5 \Rightarrow x + y \le 6\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>The TermList providing the context for the refinement.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>vars_to_elim</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>Variables that should not appear in the resulting term.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>A list of terms not containing any variables in <code>vars_to_elim</code></p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>and which, in the context provided, imply the terms contained in the</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>calling termlist.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>Self has empty intersection with its context.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">elim_vars_by_refining</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Eliminate variables from PolyhedralTermList by refining it in context.</span>

<span class="sd">    Example:</span>
<span class="sd">        Suppose the current list of terms is $\\{x + y \\le 6\\}$, the</span>
<span class="sd">        context is $\\{y \\le 5\\}$, and the resulting terms should not</span>
<span class="sd">        contain variable $y$. Then the current TermList could be</span>
<span class="sd">        refined to $\\{x \\le 1\\}$ because $x \\le 1</span>
<span class="sd">        \\;\\land\\; y \\le 5 \\Rightarrow x + y \\le 6$.</span>

<span class="sd">    Args:</span>
<span class="sd">        context:</span>
<span class="sd">            The TermList providing the context for the refinement.</span>
<span class="sd">        vars_to_elim:</span>
<span class="sd">            Variables that should not appear in the resulting term.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of terms not containing any variables in `vars_to_elim`</span>
<span class="sd">        and which, in the context provided, imply the terms contained in the</span>
<span class="sd">        calling termlist.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Self has empty intersection with its context.</span>
<span class="sd">    """</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Refining from terms: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars to elim: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">termlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"Provided constraints </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"are unsatisfiable in context </span><span class="se">\n</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">termlist</span><span class="o">.</span><span class="n">_transform</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="o">=</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"The elimination of variables </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vars_to_elim</span><span class="p">])</span>
            <span class="o">+</span> <span class="s2">"by refining terms </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">"in context </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">"was not possible"</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.elim_vars_by_relaxing" class="doc doc-heading">
<code class="highlight language-python"><span class="n">elim_vars_by_relaxing</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.elim_vars_by_relaxing" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Eliminate variables from PolyhedralTermList by abstracting it in context.</p>

<details class="example">
  <summary>Example</summary>
  <p>Suppose the current list of terms is <span class="arithmatex">\(\{x - y \le 6\}\)</span>, the
context is <span class="arithmatex">\(\{y \le 5\}\)</span>, and the resulting terms should not
contain variable <span class="arithmatex">\(y\)</span>. Then the current TermList could be
relaxed to <span class="arithmatex">\(\{x \le 11\}\)</span> because <span class="arithmatex">\(x - y \le 6
\;\land\; y \le 5 \Rightarrow x \le 11\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>The TermList providing the context for the transformation.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>vars_to_elim</code></td>
          <td>
                <code>list</code>
          </td>
          <td><p>Variables that should not appear in the relaxed terms.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>A list of terms not containing any variables in <code>vars_to_elim</code></p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>and which, in the context provided, are implied by the terms</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>contained in the calling termlist.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>Constraints have empty intersection with context.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">elim_vars_by_relaxing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Eliminate variables from PolyhedralTermList by abstracting it in context.</span>

<span class="sd">    Example:</span>
<span class="sd">        Suppose the current list of terms is $\\{x - y \\le 6\\}$, the</span>
<span class="sd">        context is $\\{y \\le 5\\}$, and the resulting terms should not</span>
<span class="sd">        contain variable $y$. Then the current TermList could be</span>
<span class="sd">        relaxed to $\\{x \\le 11\\}$ because $x - y \\le 6</span>
<span class="sd">        \\;\\land\\; y \\le 5 \\Rightarrow x \\le 11$.</span>

<span class="sd">    Args:</span>
<span class="sd">        context:</span>
<span class="sd">            The TermList providing the context for the transformation.</span>
<span class="sd">        vars_to_elim:</span>
<span class="sd">            Variables that should not appear in the relaxed terms.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of terms not containing any variables in `vars_to_elim`</span>
<span class="sd">        and which, in the context provided, are implied by the terms</span>
<span class="sd">        contained in the calling termlist.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Constraints have empty intersection with context.</span>
<span class="sd">    """</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Relaxing with context"</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Relaxing from terms </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Vars to elim: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">termlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"Provided constraints </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"are unsatisfiable in context </span><span class="se">\n</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">termlist</span> <span class="o">=</span> <span class="n">termlist</span><span class="o">.</span><span class="n">_transform</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">vars_to_elim</span><span class="o">=</span><span class="n">vars_to_elim</span><span class="p">,</span> <span class="n">refine</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"The elimination of variables </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vars_to_elim</span><span class="p">])</span>
            <span class="o">+</span> <span class="s2">"by relaxing terms </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">"in context </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">"was not possible"</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
    <span class="c1"># eliminate terms containing the variables to be eliminated</span>
    <span class="n">terms_to_elim</span> <span class="o">=</span> <span class="n">termlist</span><span class="o">.</span><span class="n">get_terms_with_vars</span><span class="p">(</span><span class="n">vars_to_elim</span><span class="p">)</span>
    <span class="n">termlist</span><span class="o">.</span><span class="n">terms</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">termlist</span><span class="o">.</span><span class="n">terms</span><span class="p">,</span> <span class="n">terms_to_elim</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">termlist</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.evaluate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evaluate</span><span class="p">(</span><span class="n">var_values</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.evaluate" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Replace variables in termlist with given values.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>var_values</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>, <span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>The values that variables will take.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>A new PolyhedralTermList in which the variables have been</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>substituted with the values provided.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>constraints are unsatisfiable under these valuation of variables.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>  <span class="c1"># noqa: WPS231</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Replace variables in termlist with given values.</span>

<span class="sd">    Args:</span>
<span class="sd">        var_values:</span>
<span class="sd">            The values that variables will take.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new PolyhedralTermList in which the variables have been</span>
<span class="sd">        substituted with the values provided.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: constraints are unsatisfiable under these valuation of variables.</span>
<span class="sd">    """</span>
    <span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
        <span class="n">new_term</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">var_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># noqa: VNE002</span>
            <span class="n">new_term</span> <span class="o">=</span> <span class="n">new_term</span><span class="o">.</span><span class="n">substitute_variable</span><span class="p">(</span>
                <span class="n">var</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">subst_with_term</span><span class="o">=</span><span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="p">{},</span> <span class="n">constant</span><span class="o">=-</span><span class="n">val</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># we may have eliminated all variables after substitution</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_term</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new_term</span><span class="o">.</span><span class="n">constant</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Term </span><span class="si">%s</span><span class="s2"> not satisfied"</span> <span class="o">%</span> <span class="p">(</span><span class="n">term</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># noqa: WPS503</span>
        <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_term</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.is_empty" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_empty</span><span class="p">()</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.is_empty" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Tell whether the argument has no satisfying assignments.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>True if constraints cannot be satisfied.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Tell whether the argument has no satisfying assignments.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if constraints cannot be satisfied.</span>
<span class="sd">    """</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span>  <span class="c1"># noqa: WPS236</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">PolyhedralTermList</span><span class="p">([])</span>
    <span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Polytope is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.is_polytope_empty" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.is_polytope_empty" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Say whether a polytope is empty.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>a</code></td>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>Matrix of H-representation of polytope to verify.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>b</code></td>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>Vector of H-representation of polytope to verify.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>True if empty. False otherwise.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>Numerical difficulties encountered.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">is_polytope_empty</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Say whether a polytope is empty.</span>

<span class="sd">    Args:</span>
<span class="sd">        a:</span>
<span class="sd">            Matrix of H-representation of polytope to verify.</span>
<span class="sd">        b:</span>
<span class="sd">            Vector of H-representation of polytope to verify.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if empty. False otherwise.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Numerical difficulties encountered.</span>
<span class="sd">    """</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Verifying polytope emptiness: a is </span><span class="si">%s</span><span class="s2"> a.shape is </span><span class="si">%s</span><span class="s2">, b is </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">*</span> <span class="n">m</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="n">objective</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># ,options={'tol':0.000001})</span>
    <span class="c1"># Linprog's status values</span>
    <span class="c1"># 0 : Optimization proceeding nominally.</span>
    <span class="c1"># 1 : Iteration limit reached.</span>
    <span class="c1"># 2 : Problem appears to be infeasible.</span>
    <span class="c1"># 3 : Problem appears to be unbounded.</span>
    <span class="c1"># 4 : Numerical difficulties encountered.</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">}:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Cannot decide emptiness"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.lacks_constraints" class="doc doc-heading">
<code class="highlight language-python"><span class="n">lacks_constraints</span><span class="p">()</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.lacks_constraints" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Tell whether TermList is empty.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>True if empty. False otherwise.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">lacks_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Tell whether TermList is empty.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if empty. False otherwise.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.optimize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">optimize</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.optimize" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Optimizes a linear expression in the feasible region of the termlist.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>objective</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>, <span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>The objective to optimize.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>maximize</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>If true, the routine maximizes; it minimizes otherwise.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="pacti.terms.polyhedra.polyhedra.numeric">numeric</span>]</code>
          </td>
          <td><p>The optimal value of the objective. If the objective is unbounded, None is returned.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>Constraints are likely unfeasible.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Var</span><span class="p">,</span> <span class="n">numeric</span><span class="p">],</span> <span class="n">maximize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numeric</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Optimizes a linear expression in the feasible region of the termlist.</span>

<span class="sd">    Args:</span>
<span class="sd">        objective:</span>
<span class="sd">            The objective to optimize.</span>
<span class="sd">        maximize:</span>
<span class="sd">            If true, the routine maximizes; it minimizes otherwise.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The optimal value of the objective. If the objective is unbounded, None is returned.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Constraints are likely unfeasible.</span>
<span class="sd">    """</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="p">([</span><span class="n">PolyhedralTerm</span><span class="p">(</span><span class="n">variables</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">)])</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">obj_mat</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>  <span class="c1"># noqa: WPS236</span>
    <span class="n">polarity</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">maximize</span><span class="p">:</span>
        <span class="n">polarity</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">polarity</span> <span class="o">*</span> <span class="n">obj_mat</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">self_cons</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
    <span class="c1"># Linprog's status values</span>
    <span class="c1"># 0 : Optimization proceeding nominally.</span>
    <span class="c1"># 1 : Iteration limit reached.</span>
    <span class="c1"># 2 : Problem appears to be infeasible.</span>
    <span class="c1"># 3 : Problem appears to be unbounded.</span>
    <span class="c1"># 4 : Numerical difficulties encountered.</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">fun_val</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">polarity</span> <span class="o">*</span> <span class="n">fun_val</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Constraints are unfeasible"</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.polytope_to_termlist" class="doc doc-heading">
<code class="highlight language-python"><span class="n">polytope_to_termlist</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">vector</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.polytope_to_termlist" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Transforms a matrix-vector pair into a PolyhedralTermList.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>matrix</code></td>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>The matrix of the pair.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>vector</code></td>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>The vector of the pair.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>variables</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>A list indicating the variable which corresponds to each column
of the matrix.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>The PolyhedralTermList corresponding to the given data.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">polytope_to_termlist</span><span class="p">(</span><span class="n">matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Transforms a matrix-vector pair into a PolyhedralTermList.</span>

<span class="sd">    Args:</span>
<span class="sd">        matrix:</span>
<span class="sd">            The matrix of the pair.</span>
<span class="sd">        vector:</span>
<span class="sd">            The vector of the pair.</span>
<span class="sd">        variables:</span>
<span class="sd">            A list indicating the variable which corresponds to each column</span>
<span class="sd">            of the matrix.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The PolyhedralTermList corresponding to the given data.</span>
<span class="sd">    """</span>
    <span class="n">term_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># logging.debug("Poly is " + str(polytope))</span>
    <span class="c1"># logging.debug("matrix is %s", matrix)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">assert</span> <span class="n">m</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">row</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">const</span> <span class="o">=</span> <span class="n">vector</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">term</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">polytope_to_term</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">const</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
        <span class="n">term_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">term_list</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.reduce_polytope" class="doc doc-heading">
<code class="highlight language-python"><span class="n">reduce_polytope</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a_help</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b_help</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.reduce_polytope" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Eliminate redundant constraints from a given polytope.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>a</code></td>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>Matrix of H-representation of polytope to reduce.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>b</code></td>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>Vector of H-representation of polytope to reduce.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>a_help</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>Matrix of H-representation of context polytope.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>b_help</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>Vector of H-representation of context polytope.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>The intersection of given polytope with its context is empty.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>a_temp</code></td>          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>Matrix of H-representation of reduced polytope.</p></td>
        </tr>
        <tr>
<td><code>b_temp</code></td>          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>Vector of H-representation of reduced polytope.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">reduce_polytope</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">a_help</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">b_help</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Eliminate redundant constraints from a given polytope.</span>

<span class="sd">    Args:</span>
<span class="sd">        a:</span>
<span class="sd">            Matrix of H-representation of polytope to reduce.</span>
<span class="sd">        b:</span>
<span class="sd">            Vector of H-representation of polytope to reduce.</span>
<span class="sd">        a_help:</span>
<span class="sd">            Matrix of H-representation of context polytope.</span>
<span class="sd">        b_help:</span>
<span class="sd">            Vector of H-representation of context polytope.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The intersection of given polytope with its context is empty.</span>

<span class="sd">    Returns:</span>
<span class="sd">        a_temp: Matrix of H-representation of reduced polytope.</span>
<span class="sd">        b_temp: Vector of H-representation of reduced polytope.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_help</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">a_help</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b_help</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">b_help</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n_h</span><span class="p">,</span> <span class="n">m_h</span> <span class="o">=</span> <span class="n">a_help</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">helper_present</span> <span class="o">=</span> <span class="n">n_h</span> <span class="o">*</span> <span class="n">m_h</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="s2">"n is </span><span class="si">{}</span><span class="s2"> and b is </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">helper_present</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">n_h</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_help</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_help</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">helper_present</span> <span class="ow">and</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">m_h</span> <span class="o">==</span> <span class="n">m</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">helper_present</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">a_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">b_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">objective</span> <span class="o">=</span> <span class="n">a_temp</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">b_temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">helper_present</span><span class="p">:</span>
            <span class="n">a_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a_temp</span><span class="p">,</span> <span class="n">a_help</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">b_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">b_temp</span><span class="p">,</span> <span class="n">b_help</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a_opt</span> <span class="o">=</span> <span class="n">a_temp</span>
            <span class="n">b_opt</span> <span class="o">=</span> <span class="n">b_temp</span>
        <span class="c1"># Linprog's status values</span>
        <span class="c1"># 0 : Optimization proceeding nominally.</span>
        <span class="c1"># 1 : Iteration limit reached.</span>
        <span class="c1"># 2 : Problem appears to be infeasible.</span>
        <span class="c1"># 3 : Problem appears to be unbounded.</span>
        <span class="c1"># 4 : Numerical difficulties encountered.</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">a_opt</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b_opt</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># ,options={'tol':0.000001})</span>
        <span class="n">b_temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="o">-</span><span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">b_temp</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>  <span class="c1"># noqa: WPS309</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Can remove"</span><span class="p">)</span>
            <span class="n">a_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">a_temp</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">b_temp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">b_temp</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"The constraints are unsatisfiable"</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">a_temp</span><span class="p">,</span> <span class="n">b_temp</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.refines" class="doc doc-heading">
<code class="highlight language-python"><span class="n">refines</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.refines" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Tells whether the argument is a larger specification.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>TermList against which we are comparing self.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>self &lt;= other</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">refines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Tells whether the argument is a larger specification.</span>

<span class="sd">    Args:</span>
<span class="sd">        other:</span>
<span class="sd">            TermList against which we are comparing self.</span>

<span class="sd">    Returns:</span>
<span class="sd">        self &lt;= other</span>
<span class="sd">    """</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Verifying refinement"</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"LH term: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"RH term: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">lacks_constraints</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lacks_constraints</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">variables</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">ctx_mat</span><span class="p">,</span> <span class="n">ctx_cons</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span>  <span class="c1"># noqa: WPS236</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">other</span>
    <span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Polytope is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">self_mat</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">verify_polytope_containment</span><span class="p">(</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">ctx_mat</span><span class="p">,</span> <span class="n">ctx_cons</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.simplify" class="doc doc-heading">
<code class="highlight language-python"><span class="n">simplify</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.simplify" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Remove redundant terms in the PolyhedralTermList using the provided context.</p>

<details class="example">
  <summary>Example</summary>
  <p>Suppose the TermList is <span class="arithmatex">\(\{x - 2y \le 5, x - y \le 0\}\)</span> and
the context is <span class="arithmatex">\(\{x + y \le 0\}\)</span>. Then the TermList could be
simplified to <span class="arithmatex">\(\{x - y \le 0\}\)</span>.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a>]</code>
          </td>
          <td><p>The TermList providing the context for the simplification.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>A new PolyhedralTermList with redundant terms removed using the provided context.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td><p>The intersection of self and context is empty.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">simplify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PolyhedralTermList</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolyhedralTermList</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Remove redundant terms in the PolyhedralTermList using the provided context.</span>

<span class="sd">    Example:</span>
<span class="sd">        Suppose the TermList is $\\{x - 2y \\le 5, x - y \\le 0\\}$ and</span>
<span class="sd">        the context is $\\{x + y \\le 0\\}$. Then the TermList could be</span>
<span class="sd">        simplified to $\\{x - y \\le 0\\}$.</span>

<span class="sd">    Args:</span>
<span class="sd">        context:</span>
<span class="sd">            The TermList providing the context for the simplification.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new PolyhedralTermList with redundant terms removed using the provided context.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The intersection of self and context is empty.</span>
<span class="sd">    """</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Starting simplification procedure"</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Simplifying terms: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Context: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">context</span><span class="p">:</span>
        <span class="n">new_self</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">context</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="n">new_self</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">PolyhedralTermList</span><span class="p">())</span>

    <span class="n">variables</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">self_mat</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">self_cons</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">ctx_mat</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">ctx_cons</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="c1"># logging.debug("Polytope is \n%s", self_mat)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">a_red</span><span class="p">,</span> <span class="n">b_red</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">reduce_polytope</span><span class="p">(</span><span class="n">self_mat</span><span class="p">,</span> <span class="n">self_cons</span><span class="p">,</span> <span class="n">ctx_mat</span><span class="p">,</span> <span class="n">ctx_cons</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">"The constraints </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"are unsatisfiable in context </span><span class="se">\n</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Reduction: </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a_red</span><span class="p">)</span>
    <span class="n">simplified</span> <span class="o">=</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">polytope_to_termlist</span><span class="p">(</span><span class="n">a_red</span><span class="p">,</span> <span class="n">b_red</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Back to terms: </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">simplified</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">simplified</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.termlist_to_polytope" class="doc doc-heading">
<code class="highlight language-python"><span class="n">termlist_to_polytope</span><span class="p">(</span><span class="n">terms</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.termlist_to_polytope" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Converts a list of terms with its context into matrix-vector pairs.</p>

<details class="example">
  <summary>Example</summary>
  <p>Suppose the list of terms is <span class="arithmatex">\(\{x+y \le 1, x - y \le 4\}\)</span>
and the context is <span class="arithmatex">\(\{x + 4w \le 5\}\)</span>. The routine extracts
all variables and generates an order for them, say, <span class="arithmatex">\([x, w,
y]\)</span>. Then the routine returns matrix-vector pairs for both the terms
TermList and the context. It returns <span class="arithmatex">\(A = \left(
\begin{smallmatrix} 1 &amp; 0 &amp; 1 \\ 1 &amp;0 &amp;-1
\end{smallmatrix}\right)\)</span> and <span class="arithmatex">\(b = \left(
\begin{smallmatrix} 1 \\ 4 \end{smallmatrix}\right)\)</span> for the
current TermList and <span class="arithmatex">\(A_{c} = \left( \begin{smallmatrix} 1 &amp;
4 &amp; 0 \end{smallmatrix}\right)\)</span> and <span class="arithmatex">\(b_c = \left(
\begin{smallmatrix} 5 \end{smallmatrix}\right)\)</span> for the context.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>terms</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>list of terms to convert to matrix-vector form.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pacti.terms.polyhedra.polyhedra.PolyhedralTermList" href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList">PolyhedralTermList</a></code>
          </td>
          <td><p>Context terms to convert to matrix-vector form.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="pacti.iocontract.Var" href="../../../iocontract/iocontract/#pacti.iocontract.iocontract.Var">Var</a>]</code>
          </td>
          <td><p>A tuple <code>variables, A, b, a_h, b_h</code> consisting of the variable</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td><p>order and the matrix-vector pairs for the terms and the context.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">termlist_to_polytope</span><span class="p">(</span>
    <span class="n">terms</span><span class="p">:</span> <span class="n">PolyhedralTermList</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">PolyhedralTermList</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Var</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Converts a list of terms with its context into matrix-vector pairs.</span>

<span class="sd">    Example:</span>
<span class="sd">        Suppose the list of terms is $\\{x+y \\le 1, x - y \\le 4\\}$</span>
<span class="sd">        and the context is $\\{x + 4w \\le 5\\}$. The routine extracts</span>
<span class="sd">        all variables and generates an order for them, say, $[x, w,</span>
<span class="sd">        y]$. Then the routine returns matrix-vector pairs for both the terms</span>
<span class="sd">        TermList and the context. It returns $A = \\left(</span>
<span class="sd">        \\begin{smallmatrix} 1 &amp; 0 &amp; 1 \\\\ 1 &amp;0 &amp;-1</span>
<span class="sd">        \\end{smallmatrix}\\right)$ and $b = \\left(</span>
<span class="sd">        \\begin{smallmatrix} 1 \\\\ 4 \\end{smallmatrix}\\right)$ for the</span>
<span class="sd">        current TermList and $A_{c} = \\left( \\begin{smallmatrix} 1 &amp;</span>
<span class="sd">        4 &amp; 0 \\end{smallmatrix}\\right)$ and $b_c = \\left(</span>
<span class="sd">        \\begin{smallmatrix} 5 \\end{smallmatrix}\\right)$ for the context.</span>

<span class="sd">    Args:</span>
<span class="sd">        terms:</span>
<span class="sd">            list of terms to convert to matrix-vector form.</span>
<span class="sd">        context:</span>
<span class="sd">            Context terms to convert to matrix-vector form.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple `variables, A, b, a_h, b_h` consisting of the variable</span>
<span class="sd">        order and the matrix-vector pairs for the terms and the context.</span>
<span class="sd">    """</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">list_union</span><span class="p">(</span><span class="n">terms</span><span class="o">.</span><span class="n">vars</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">vars</span><span class="p">))</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">terms</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
        <span class="n">pol</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pol</span><span class="p">)</span>
        <span class="n">b</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>

    <span class="n">a_h</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">b_h</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">:</span>
        <span class="n">pol</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">PolyhedralTerm</span><span class="o">.</span><span class="n">term_to_polytope</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
        <span class="n">a_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pol</span><span class="p">)</span>
        <span class="n">b_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">a_h_ret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">a_h_ret</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a_h</span><span class="p">)</span>
    <span class="c1"># logging.debug("a is \n%s", a)</span>
    <span class="k">return</span> <span class="n">variables</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="n">a_h_ret</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b_h</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.to_str_list" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_str_list</span><span class="p">()</span></code>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.to_str_list" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Convert termlist into a list of strings.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td><p>A list of strings corresponding to the terms of the termlist.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_str_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Convert termlist into a list of strings.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of strings corresponding to the terms of the termlist.</span>
<span class="sd">    """</span>
    <span class="n">str_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">ts</span><span class="p">:</span>
        <span class="n">s</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">polyhedral_term_list_to_strings</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
        <span class="n">str_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="n">rest</span>
    <span class="k">return</span> <span class="n">str_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pacti.terms.polyhedra.polyhedra.PolyhedralTermList.verify_polytope_containment" class="doc doc-heading">
<code class="highlight language-python"><span class="n">verify_polytope_containment</span><span class="p">(</span><span class="n">a_l</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b_l</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">b_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#pacti.terms.polyhedra.polyhedra.PolyhedralTermList.verify_polytope_containment" class="headerlink" title="Permanent link">Â¶</a></h3>


  <div class="doc doc-contents ">
  
      <p>Tell whether a polytope is contained in another.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>a_l</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>Matrix of H-representation of polytope on LHS of inequality.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>b_l</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>Vector of H-representation of polytope on LHS of inequality.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>a_r</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>Matrix of H-representation of polytope on RHS of inequality.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>b_r</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>Vector of H-representation of polytope on RHS of inequality.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td><p>True if left polytope is contained in right polytope. False otherwise.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pacti\terms\polyhedra\polyhedra.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">verify_polytope_containment</span><span class="p">(</span>  <span class="c1"># noqa: WPS231</span>
    <span class="n">a_l</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">b_l</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">a_r</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">b_r</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Tell whether a polytope is contained in another.</span>

<span class="sd">    Args:</span>
<span class="sd">        a_l:</span>
<span class="sd">            Matrix of H-representation of polytope on LHS of inequality.</span>
<span class="sd">        b_l:</span>
<span class="sd">            Vector of H-representation of polytope on LHS of inequality.</span>
<span class="sd">        a_r:</span>
<span class="sd">            Matrix of H-representation of polytope on RHS of inequality.</span>
<span class="sd">        b_r:</span>
<span class="sd">            Vector of H-representation of polytope on RHS of inequality.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if left polytope is contained in right polytope. False otherwise.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_l</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">a_l</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a_r</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">a_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[]])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b_l</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">b_l</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b_r</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">b_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
    <span class="c1"># If the LHS is empty, it is a refinement</span>
    <span class="k">if</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">a_l</span><span class="p">,</span> <span class="n">b_l</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="c1"># If the RHS is empty, but not the LHS, not a refinement</span>
    <span class="k">if</span> <span class="n">PolyhedralTermList</span><span class="o">.</span><span class="n">is_polytope_empty</span><span class="p">(</span><span class="n">a_r</span><span class="p">,</span> <span class="n">b_r</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># If no side is empty, check whether the RHS terms are included in the</span>
    <span class="c1"># LHS</span>
    <span class="n">n_l</span><span class="p">,</span> <span class="n">m_l</span> <span class="o">=</span> <span class="n">a_l</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">n_r</span><span class="p">,</span> <span class="n">m_r</span> <span class="o">=</span> <span class="n">a_r</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">assert</span> <span class="n">m_l</span> <span class="o">==</span> <span class="n">m_r</span>
    <span class="k">assert</span> <span class="n">n_l</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_l</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">n_r</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">b_r</span><span class="p">)</span>

    <span class="n">is_refinement</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_r</span><span class="p">):</span>
        <span class="n">constraint</span> <span class="o">=</span> <span class="n">a_r</span><span class="p">[[</span><span class="n">i</span><span class="p">],</span> <span class="p">:]</span>
        <span class="n">objective</span> <span class="o">=</span> <span class="n">constraint</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">b_temp</span> <span class="o">=</span> <span class="n">b_r</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Optimization objective: </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">objective</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"a_l is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a_l</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"a_r is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">a_r</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"b_l is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">b_l</span><span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"b_r is </span><span class="se">\n</span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">b_r</span><span class="p">)</span>

        <span class="n">a_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a_l</span><span class="p">,</span> <span class="n">constraint</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">b_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">b_l</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">b_temp</span><span class="p">])))</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">linprog</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span> <span class="n">A_ub</span><span class="o">=</span><span class="n">a_opt</span><span class="p">,</span> <span class="n">b_ub</span><span class="o">=</span><span class="n">b_opt</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># ,options={'tol':0.000001})</span>
        <span class="n">b_temp</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">is_refinement</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="o">-</span><span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">b_temp</span><span class="p">:</span>  <span class="c1"># noqa: WPS309</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Redundant constraint"</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">is_refinement</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Optimal value: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="o">-</span><span class="n">res</span><span class="p">[</span><span class="s2">"fun"</span><span class="p">])</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Results: </span><span class="si">%s</span><span class="s2">"</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">is_refinement</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - <script>document.write(new Date().getFullYear())</script> Caltech &amp UC Berkeley - <a href="#__consent">Change cookie settings</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top"], "search": "../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.407015b8.min.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://kit.fontawesome.com/4f533dc5a0.js"></script>
      
    
  </body>
</html>